{"version":3,"sources":["components/Profile/index.js"],"names":["withRouter","props","useContext","StoreContext","state","actions","useState","activeTab","setActiveTab","moreMenu","setMoreMenu","editName","setName","editModalOpen","setEditModalOpen","deleteModalOpen","setDeleteModalOpen","exportModalOpen","setExportModalOpen","spendingModalOpen","setSpendingModalOpen","createModalOpen","setCreateModalOpen","setSaved","tab","setTab","styleBody","setStyleBody","user","userSqueaks","privateKey","session","userParam","match","params","username","useEffect","window","scrollTo","getUser","reloadSqueaks","isInitialMount","useRef","current","document","getElementsByTagName","style","cssText","changeTab","toggleEditModal","param","type","getProfileName","setTimeout","toggleDeleteModal","toggleExportModal","toggleSpendingModal","toggleCreateModal","handleModalClick","e","stopPropagation","uploadAvatar","file","reader","FileReader","addEventListener","imageBase64Stripped","result","split","uploadAvatarAsBase64","readAsDataURL","imageBase64","values","profileId","getProfileId","profileImg","updateUserImage","clearUserSqueaks","getUserSqueaks","lastSqueak","openMore","className","onClick","history","back","alt","src","getProfileImageSrcString","id","display","top","getElementById","getBoundingClientRect","left","height","handleMenuClick","getHasPrivateKey","downloadUserSqueaks","getFollowing","unfollowUser","followUser","alert","key","map","t","getReplyTo","squeak","getSqueakHash","getAuthor","length","loading","squeakLst","slice","lastUserSqueak","getMoreSqueaks","name","updateUser","onChange","files","changeAvatar","title","opacity","defaultValue","target","value","deleteUser","exportPrivateKey","readOnly","createContactProfile","profileName","pubkey"],"mappings":"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","file":"static/js/5.6b67b257.chunk.js","sourcesContent":["import React , { useEffect, useState, useContext, useRef} from 'react'\r\nimport './style.scss'\r\nimport { ICON_ARROWBACK, ICON_MARKDOWN, ICON_DATE, ICON_CLOSE, ICON_UPLOAD, ICON_NEWMSG, ICON_SETTINGS, ICON_DARK } from '../../Icons'\r\nimport { withRouter, Link } from 'react-router-dom'\r\nimport { StoreContext } from '../../store/store'\r\nimport { getProfileImageSrcString } from '../../squeakimages/images';\r\nimport Loader from '../Loader'\r\nimport moment from 'moment'\r\nimport SqueakCard from '../SqueakCard'\r\nimport {API_URL} from '../../config'\r\n\r\n\r\nconst Profile = (props) => {\r\n    const { state, actions } = useContext(StoreContext)\r\n    const [activeTab, setActiveTab] = useState('Squeaks')\r\n    const [moreMenu, setMoreMenu] = useState(false)\r\n    const [editName, setName] = useState('')\r\n    // const [privateKey, setPrivateKey] = useState('')\r\n    const [editModalOpen, setEditModalOpen] = useState(false)\r\n    const [deleteModalOpen, setDeleteModalOpen] = useState(false)\r\n    const [exportModalOpen, setExportModalOpen] = useState(false)\r\n    const [spendingModalOpen, setSpendingModalOpen] = useState(false)\r\n    const [createModalOpen, setCreateModalOpen] = useState(false)\r\n    const [saved, setSaved] = useState(false)\r\n    const [tab, setTab] = useState('Sats Spent')\r\n    const [styleBody, setStyleBody] = useState(false)\r\n    const {user, userSqueaks, privateKey, session} = state\r\n    const userParam = props.match.params.username\r\n\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0)\r\n        actions.getUser(props.match.params.username)\r\n        reloadSqueaks();\r\n        //preventing edit modal from apprearing after clicking a user on memOpen\r\n        setEditModalOpen(false)\r\n        setName('')\r\n    }, [props.match.params.username])\r\n\r\n    const isInitialMount = useRef(true);\r\n    useEffect(() => {\r\n        if (isInitialMount.current){ isInitialMount.current = false }\r\n        else {\r\n            document.getElementsByTagName(\"body\")[0].style.cssText = styleBody && \"overflow-y: hidden; margin-right: 17px\"\r\n        }\r\n      }, [styleBody])\r\n\r\n      useEffect( () => () => document.getElementsByTagName(\"body\")[0].style.cssText = \"\", [] )\r\n\r\n      const changeTab = (tab) => {\r\n        setActiveTab(tab)\r\n    }\r\n\r\n    const editProfile = () => {\r\n        let values = {\r\n            profileId: user.getProfileId(),\r\n            name: editName,\r\n        }\r\n        actions.updateUser(values)\r\n        setSaved(true)\r\n        toggleEditModal()\r\n    }\r\n\r\n    const deleteProfile = () => {\r\n        let values = {\r\n            profileId: user.getProfileId(),\r\n        }\r\n        actions.deleteUser(values);\r\n        toggleDeleteModal();\r\n    }\r\n\r\n\r\n    const exportPrivateKey = () => {\r\n        let values = {\r\n            profileId: user.getProfileId(),\r\n        }\r\n        actions.exportPrivateKey(values);\r\n        // toggleExportModal();\r\n    }\r\n\r\n    const downloadUserSqueaks = () => {\r\n        actions.downloadUserSqueaks(userParam);\r\n    }\r\n\r\n\r\n    const createContactProfile = () => {\r\n        actions.createContactProfile({profileName: editName, pubkey: userParam});\r\n        toggleCreateModal();\r\n    }\r\n\r\n    const toggleEditModal = (param, type) => {\r\n        setStyleBody(!styleBody)\r\n        setSaved(false)\r\n        setName(user.getProfileName())\r\n        setTimeout(()=>{ setEditModalOpen(!editModalOpen) },20)\r\n    }\r\n\r\n    const toggleDeleteModal = () => {\r\n        setStyleBody(!styleBody)\r\n        setSaved(false)\r\n        setTimeout(()=>{ setDeleteModalOpen(!deleteModalOpen) },20)\r\n    }\r\n\r\n    const toggleExportModal = () => {\r\n        setStyleBody(!styleBody)\r\n        setSaved(false)\r\n        setTimeout(()=>{ setExportModalOpen(!exportModalOpen) },20)\r\n    }\r\n\r\n    const toggleSpendingModal = (param, type) => {\r\n        setStyleBody(!styleBody)\r\n        if(type){setTab(type)}\r\n        // TODO: fetch spending info\r\n        // actions.getFollowers(props.match.params.username)\r\n        if(type){setTab(type)}\r\n        setTimeout(()=>{ setSpendingModalOpen(!spendingModalOpen) },20)\r\n    }\r\n\r\n    const toggleCreateModal = (param, type) => {\r\n        setStyleBody(!styleBody)\r\n        setSaved(false)\r\n        setTimeout(()=>{ setCreateModalOpen(!createModalOpen) },20)\r\n    }\r\n\r\n    const handleModalClick = (e) => {\r\n        e.stopPropagation()\r\n    }\r\n\r\n    const followUser = (e,id) => {\r\n        if(!session){ actions.alert('Please Sign In'); return }\r\n        e.stopPropagation()\r\n        actions.followUser(id)\r\n    }\r\n\r\n    const unfollowUser = (e,id) => {\r\n        e.stopPropagation()\r\n        actions.unfollowUser(id)\r\n    }\r\n\r\n    const changeAvatar = () => {\r\n        let file = document.getElementById('avatar').files[0];\r\n        uploadAvatar(file);\r\n    }\r\n\r\n    const uploadAvatar = (file) => {\r\n      if (file == null)\r\n        return;\r\n      const reader = new FileReader();\r\n      reader.addEventListener('load', () => {\r\n        // convert image file to base64 string\r\n        // preview.src = reader.result;\r\n        const imageBase64Stripped = reader.result.split(',')[1];\r\n        uploadAvatarAsBase64(imageBase64Stripped);\r\n      }, false);\r\n      if (file) {\r\n        reader.readAsDataURL(file);\r\n      }\r\n    };\r\n\r\n    const uploadAvatarAsBase64 = (imageBase64) => {\r\n      let values = {\r\n          profileId: user.getProfileId(),\r\n          profileImg: imageBase64,\r\n      }\r\n      actions.updateUserImage(values)\r\n      setSaved(true)\r\n      toggleEditModal()\r\n    };\r\n\r\n    const goToUser = (id) => {\r\n        setEditModalOpen(false)\r\n        props.history.push(`/app/profile/${id}`)\r\n    }\r\n\r\n    const getLastSqueak = (squeakLst) => {\r\n      if (squeakLst == null) {\r\n        return null;\r\n      } if (squeakLst.length === 0) {\r\n        return null;\r\n      }\r\n      return squeakLst.slice(-1)[0];\r\n    };\r\n\r\n    const getMoreSqueaks = () => {\r\n        let lastSqueak = getLastSqueak(userSqueaks);\r\n        actions.getUserSqueaks({username: props.match.params.username, lastUserSqueak: lastSqueak})\r\n    }\r\n\r\n    const reloadSqueaks = () => {\r\n        actions.clearUserSqueaks();\r\n        actions.getUserSqueaks({username: props.match.params.username, lastSqueak: null});\r\n    }\r\n\r\n    const openMore = () => { setMoreMenu(!moreMenu) }\r\n\r\n    const handleMenuClick = (e) => { e.stopPropagation() }\r\n\r\n\r\n    return(\r\n        <div>\r\n            <div>\r\n            <div className=\"profile-wrapper\">\r\n            <div className=\"profile-header-wrapper\">\r\n                <div className=\"profile-header-back\">\r\n                    <div onClick={()=>window.history.back()} className=\"header-back-wrapper\">\r\n                        <ICON_ARROWBACK/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"profile-header-content\">\r\n                    <div className=\"profile-header-name\">\r\n                            {userParam}\r\n                    </div>\r\n                    {/* <div className=\"profile-header-squeaks\">\r\n                            82 Squeaks\r\n                    </div> */}\r\n                </div>\r\n            </div>\r\n            <div className=\"profile-banner-wrapper\">\r\n                <img alt=\"\"/>\r\n            </div>\r\n            <div className=\"profile-details-wrapper\">\r\n                <div className=\"profile-options\">\r\n                    <div className=\"profile-image-wrapper\">\r\n                        <img src={user ? `${getProfileImageSrcString(user)}` : null} alt=\"\"/>\r\n                    </div>\r\n\r\n                    {user &&\r\n                      <div id=\"profileMoreMenu\" onClick={openMore} className=\"Nav-link\">\r\n                          <div className={\"Nav-item-hover\"}>\r\n                              <ICON_SETTINGS  />\r\n                          </div>\r\n                          <div onClick={()=>openMore()} style={{display: moreMenu ? 'block' : 'none'}} className=\"more-menu-background\">\r\n                          <div className=\"more-modal-wrapper\">\r\n                              {moreMenu ?\r\n                              <div style={{top: `${document.getElementById('profileMoreMenu').getBoundingClientRect().top - 40}px`, left: `${document.getElementById('profileMoreMenu').getBoundingClientRect().left}px`, height: '210px' }} onClick={(e)=>handleMenuClick(e)} className=\"more-menu-content\">\r\n                                      <div onClick={toggleDeleteModal} className=\"more-menu-item\">\r\n                                          <span>Delete Profile</span>\r\n                                      </div>\r\n                                      <div onClick={toggleEditModal} className=\"more-menu-item\">\r\n                                          <span>Edit Profile</span>\r\n                                      </div>\r\n                                      {user.getHasPrivateKey() &&\r\n                                        <div onClick={toggleExportModal} className=\"more-menu-item\">\r\n                                            <span>Export Private Key</span>\r\n                                        </div>\r\n                                      }\r\n                              </div> : null }\r\n                          </div>\r\n                          </div>\r\n                      </div>\r\n                    }\r\n\r\n                    <div onClick={(e)=>\r\n                        downloadUserSqueaks()\r\n                      }\r\n                       className={'profile-edit-button'}>\r\n                          <span><span>{'Download Squeaks'}</span></span>\r\n                    </div>\r\n\r\n                    {user &&\r\n                      <div onClick={(e)=>\r\n                        user.getFollowing() ?\r\n                        unfollowUser(e,user.getProfileId()) :\r\n                        followUser(e,user.getProfileId())\r\n                      }\r\n                       className={user.getFollowing() ? 'unfollow-switch profile-edit-button' : 'profile-edit-button'}>\r\n                          <span><span>{ user.getFollowing() ? 'Following' : 'Follow'}</span></span>\r\n                      </div>\r\n                    }\r\n\r\n                    {!user &&\r\n                      <div onClick={(e)=>toggleCreateModal('create')}\r\n                       className='profiles-create-button'>\r\n                          <span>Add Contact Profile</span>\r\n                      </div>\r\n                    }\r\n                </div>\r\n                <div className=\"profile-details-box\">\r\n                    <div className=\"profile-name\">{user ? user.getProfileName() : ''}</div>\r\n                    <div className=\"profile-username\">@{userParam}</div>\r\n                    <div className=\"profile-bio\">\r\n                        &nbsp;\r\n                    </div>\r\n                    <div className=\"profile-info-box\">\r\n                        &nbsp;\r\n                    </div>\r\n                </div>\r\n                <div className=\"profile-social-box\">\r\n                        {/* TODO: Implement sats spent */}\r\n                        <div onClick={()=>toggleSpendingModal('members','Sats Spent')}>\r\n                            <p className=\"follow-num\"> 0 </p>\r\n                            <p className=\"follow-text\"> sats spent </p>\r\n                        </div>\r\n                        {/* TODO: Implement sats eaned */}\r\n                        <div onClick={()=>toggleSpendingModal('members', 'Sats Earned')}>\r\n                            <p className=\"follow-num\"> 0 </p>\r\n                            <p className=\"follow-text\"> sats earned </p>\r\n                        </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"profile-nav-menu\">\r\n                <div key={'squeaks'} onClick={()=>changeTab('Squeaks')} className={activeTab ==='Squeaks' ? `profile-nav-item activeTab` : `profile-nav-item`}>\r\n                    Squeaks\r\n                </div>\r\n                <div key={'replies'} onClick={()=>changeTab('Squeaks&Replies')} className={activeTab ==='Squeaks&Replies' ? `profile-nav-item activeTab` : `profile-nav-item`}>\r\n                    Squeaks & replies\r\n                </div>\r\n                <div key={'media'} onClick={()=>changeTab('Media')} className={activeTab ==='Media' ? `profile-nav-item activeTab` : `profile-nav-item`}>\r\n                    Media\r\n                </div>\r\n                <div key={'likes'} onClick={()=>changeTab('Likes')} className={activeTab ==='Likes' ? `profile-nav-item activeTab` : `profile-nav-item`}>\r\n                    Likes\r\n                </div>\r\n            </div>\r\n            {activeTab === 'Squeaks' ?\r\n            userSqueaks.map(t=>{\r\n                if(!t.getReplyTo())\r\n                return <SqueakCard squeak={t} key={t.getSqueakHash()} id={t.getSqueakHash()} user={t.getAuthor()} />\r\n             }) : activeTab === 'Squeaks&Replies' ?\r\n            userSqueaks.map(t=>{\r\n                return <SqueakCard squeak={t} key={t.getSqueakHash()} id={t.getSqueakHash()} user={t.getAuthor()} />\r\n             }) :\r\n            activeTab === 'Likes' ?\r\n            null: activeTab === 'Media' ?\r\n            null: null}\r\n            {/* TODO: fix get loading state by doing this: https://medium.com/stashaway-engineering/react-redux-tips-better-way-to-handle-loading-flags-in-your-reducers-afda42a804c6 */}\r\n            {userSqueaks.length > 0 &&\r\n                <>\r\n                {state.loading ?\r\n                    <Loader /> :\r\n                    <div onClick={() => getMoreSqueaks()} className='squeak-btn-side squeak-btn-active'>\r\n                      Load more\r\n                </div>}\r\n                </>\r\n            }\r\n\r\n            </div>\r\n\r\n            {/* Modal for edit profile */}\r\n            <div onClick={()=>toggleEditModal()} style={{display: editModalOpen ? 'block' : 'none'}} className=\"modal-edit\">\r\n                <div onClick={(e)=>handleModalClick(e)} className=\"modal-content\">\r\n                    <div className=\"modal-header\">\r\n                        <div className=\"modal-closeIcon\">\r\n                            <div onClick={()=>toggleEditModal()} className=\"modal-closeIcon-wrap\">\r\n                                <ICON_CLOSE />\r\n                            </div>\r\n                        </div>\r\n                        <p className=\"modal-title\">'Edit Profile'</p>\r\n                        <div className=\"save-modal-wrapper\">\r\n                            <div onClick={editProfile} className=\"save-modal-btn\">\r\n                                Save\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"modal-body\">\r\n                        <div className=\"modal-banner\">\r\n                        </div>\r\n                        <div className=\"modal-profile-pic\">\r\n                            <div className=\"modal-back-pic\">\r\n                                <img src={user ? `${getProfileImageSrcString(user)}` : null} alt=\"profile\" />\r\n                                <div>\r\n                                    <ICON_UPLOAD/>\r\n                                    <input onChange={()=>changeAvatar()} title=\" \" id=\"avatar\" style={{opacity:'0'}} type=\"file\"/>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        {user ?\r\n                          <form className=\"edit-form\">\r\n                              <div className=\"edit-input-wrap\">\r\n                                  <div className=\"edit-input-content\">\r\n                                      <label>Name</label>\r\n                                      <input defaultValue={user.getProfileName()} onChange={(e)=>setName(e.target.value)} type=\"text\" name=\"name\" className=\"edit-input\"/>\r\n                                  </div>\r\n                              </div>\r\n                          </form> :\r\n                          <form className=\"create-form\">\r\n                              <div className=\"create-input-wrap\">\r\n                                  <div className=\"create-input-content\">\r\n                                      <label>Name</label>\r\n                                      <input defaultValue={''} onChange={(e)=>setName(e.target.value)} type=\"text\" name=\"name\" className=\"edit-input\"/>\r\n                                  </div>\r\n                              </div>\r\n                          </form>\r\n\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            {/* Modal for delete profile */}\r\n            <div onClick={()=>toggleDeleteModal()} style={{display: deleteModalOpen ? 'block' : 'none'}} className=\"modal-edit\">\r\n                <div onClick={(e)=>handleModalClick(e)} className=\"modal-content\">\r\n                    <div className=\"modal-header\">\r\n                        <div className=\"modal-closeIcon\">\r\n                            <div onClick={()=>toggleDeleteModal()} className=\"modal-closeIcon-wrap\">\r\n                                <ICON_CLOSE />\r\n                            </div>\r\n                        </div>\r\n                        <p className=\"modal-title\">'Delete Profile'</p>\r\n                        <div className=\"save-modal-wrapper\">\r\n                            <div onClick={deleteProfile} className=\"save-modal-btn\">\r\n                                Delete\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Modal for export profile */}\r\n            <div onClick={()=>toggleExportModal()} style={{display: exportModalOpen ? 'block' : 'none'}} className=\"modal-edit\">\r\n                <div onClick={(e)=>handleModalClick(e)} className=\"modal-content\">\r\n                    <div className=\"modal-header\">\r\n                        <div className=\"modal-closeIcon\">\r\n                            <div onClick={()=>toggleExportModal()} className=\"modal-closeIcon-wrap\">\r\n                                <ICON_CLOSE />\r\n                            </div>\r\n                        </div>\r\n                        <p className=\"modal-title\">'Export Private Key'</p>\r\n                        <div className=\"save-modal-wrapper\">\r\n                            <div onClick={exportPrivateKey} className=\"save-modal-btn\">\r\n                                Export\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"modal-body\">\r\n                        <form className=\"edit-form\">\r\n                            <div className=\"edit-input-wrap\">\r\n                                <div className=\"edit-input-content\">\r\n                                    <label>Private Key</label>\r\n                                    <input defaultValue={privateKey} readOnly type=\"text\" name=\"name\" className=\"edit-input\"/>\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n\r\n\r\n            {/* Modal for sats spent and earned */}\r\n            <div onClick={()=>toggleSpendingModal()} style={{display: spendingModalOpen ? 'block' : 'none'}} className=\"modal-edit\">\r\n                <div onClick={(e)=>handleModalClick(e)} className=\"modal-content\">\r\n                    <div className=\"modal-header no-b-border\">\r\n                        <div className=\"modal-closeIcon\">\r\n                            <div onClick={()=>toggleEditModal()} className=\"modal-closeIcon-wrap\">\r\n                                <ICON_CLOSE />\r\n                            </div>\r\n                        </div>\r\n                        <p className=\"modal-title\">{null}</p>\r\n                    </div>\r\n                    <div className=\"modal-body\">\r\n                    <div className=\"explore-nav-menu\">\r\n                        <div onClick={()=>setTab('Sats Spent')} className={tab =='Sats Spent' ? `explore-nav-item activeTab` : `explore-nav-item`}>\r\n                            Sats Spent\r\n                        </div>\r\n                        <div onClick={()=>setTab('Sats Earned')} className={tab =='Sats Earned' ? `explore-nav-item activeTab` : `explore-nav-item`}>\r\n                            Sats Earned\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"modal-scroll\">\r\n                    </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Modal for create signing profile */}\r\n            <div onClick={()=>toggleCreateModal()} style={{display: createModalOpen ? 'block' : 'none'}} className=\"modal-edit\">\r\n                <div onClick={(e)=>handleModalClick(e)} className=\"modal-content\">\r\n                    <div className=\"modal-header\">\r\n                        <div className=\"modal-closeIcon\">\r\n                            <div onClick={()=>toggleCreateModal()} className=\"modal-closeIcon-wrap\">\r\n                                <ICON_CLOSE />\r\n                            </div>\r\n                        </div>\r\n                        <p className=\"modal-title\">Add Contact Profile</p>\r\n\r\n                        <div className=\"save-modal-wrapper\">\r\n                            <div onClick={createContactProfile} className=\"save-modal-btn\">\r\n                                Submit\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"modal-body\">\r\n                        <form className=\"edit-form\">\r\n                            <div className=\"edit-input-wrap\">\r\n                                <div className=\"edit-input-content\">\r\n                                    <label>Profile Name</label>\r\n                                    <input defaultValue={''} onChange={(e)=>setName(e.target.value)} type=\"text\" name=\"name\" className=\"edit-input\"/>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"edit-input-wrap\">\r\n                                <div className=\"edit-input-content\">\r\n                                    <label>Public Key</label>\r\n                                    <input defaultValue={userParam} readOnly type=\"text\" name=\"name\" className=\"edit-input\"/>\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(Profile)\r\n"],"sourceRoot":""}