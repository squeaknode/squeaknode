{"version":3,"sources":["components/Peer/index.js"],"names":["withRouter","props","useState","editName","setName","deleteModalOpen","setDeleteModalOpen","savePeerModalOpen","setSavePeerModalOpen","setSaved","styleBody","setStyleBody","peer","useSelector","selectCurrentPeer","dispatch","useDispatch","useEffect","window","scrollTo","fetchPeer","network","match","params","host","port","isInitialMount","useRef","current","document","getElementsByTagName","style","cssText","toggleDeleteModal","setTimeout","toggleSavePeerModal","param","type","handleModalClick","e","stopPropagation","className","onClick","history","back","getPeerName","getAutoconnect","id","values","peerId","getPeerId","setPeerAutoconnectDisabled","setIsNotAutoconnect","console","log","setPeerAutoconnectEnabled","setIsAutoconnect","display","setDeletePeer","strippedHost","replace","setSavePeer","name","onChange","target","value"],"mappings":"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","file":"static/js/4.fbb8f68d.chunk.js","sourcesContent":["import React , { useEffect, useState, useContext, useRef } from 'react'\r\nimport './style.scss'\r\nimport moment from 'moment'\r\nimport {  withRouter, Link } from 'react-router-dom'\r\nimport Loader from '../Loader'\r\nimport SqueakCard from '../SqueakCard'\r\nimport {API_URL} from '../../config'\r\nimport axios from 'axios'\r\nimport {ICON_ARROWBACK, ICON_UPLOAD, ICON_CLOSE,ICON_SEARCH } from '../../Icons'\r\n\r\nimport { unwrapResult } from '@reduxjs/toolkit'\r\nimport { useSelector } from 'react-redux'\r\nimport { useDispatch } from 'react-redux'\r\n\r\nimport {\r\n  fetchPeer,\r\n  selectCurrentPeer,\r\n  selectCurrentPeerStatus,\r\n  setSavePeer,\r\n  setDeletePeer,\r\n  setPeerAutoconnectEnabled,\r\n  setPeerAutoconnectDisabled,\r\n} from '../../features/peers/peersSlice'\r\n\r\n\r\nconst Peer = (props) => {\r\n\r\nconst [modalOpen, setModalOpen] = useState(false)\r\n\r\nconst [editName, setName] = useState('')\r\nconst [editDescription, setDescription] = useState('')\r\nconst [deleteModalOpen, setDeleteModalOpen] = useState(false)\r\nconst [savePeerModalOpen, setSavePeerModalOpen] = useState(false)\r\nconst [banner, setBanner] = useState('')\r\nconst [saved, setSaved] = useState(false)\r\nconst [tab, setTab] = useState('Members')\r\nconst [bannerLoading, setBannerLoading] = useState(false)\r\nconst [styleBody, setStyleBody] = useState(false)\r\n\r\nconst peer = useSelector(selectCurrentPeer);\r\nconst dispatch = useDispatch();\r\n\r\n\r\nuseEffect(() => {\r\n    window.scrollTo(0, 0)\r\n    dispatch(fetchPeer({\r\n      network: props.match.params.network,\r\n      host: props.match.params.host,\r\n      port: props.match.params.port,\r\n    }));\r\n}, [])\r\n\r\nconst isInitialMount = useRef(true);\r\nuseEffect(() => {\r\n    if (isInitialMount.current){ isInitialMount.current = false }\r\n    else {\r\n        document.getElementsByTagName(\"body\")[0].style.cssText = styleBody && \"overflow-y: hidden; margin-right: 17px\"\r\n    }\r\n}, [styleBody])\r\n\r\nuseEffect( () => () => document.getElementsByTagName(\"body\")[0].style.cssText = \"\", [] )\r\n\r\n\r\nconst deletePeer = () => {\r\n    let values = {\r\n        peerId: peer.getPeerId(),\r\n    }\r\n    dispatch(setDeletePeer(values));\r\n    toggleDeleteModal();\r\n}\r\n\r\nfunction removeHttp(url) {\r\n  return url.replace(/^https?:\\/\\//, '');\r\n}\r\n\r\nconst savePeer = () => {\r\n    const strippedHost = removeHttp(props.match.params.host);\r\n    dispatch(setSavePeer({\r\n        name: editName,\r\n        host: strippedHost,\r\n        port: props.match.params.port,\r\n        network: props.match.params.network,\r\n    }));\r\n    toggleSavePeerModal();\r\n}\r\n\r\nconst setIsAutoconnect = (e,id) => {\r\n    e.stopPropagation()\r\n    console.log(id);\r\n    console.log(peer.getPeerId());\r\n    let values = {\r\n        peerId: peer.getPeerId(),\r\n    }\r\n\r\n    dispatch(setPeerAutoconnectEnabled(values));\r\n}\r\n\r\nconst setIsNotAutoconnect = (e,id) => {\r\n    e.stopPropagation()\r\n    let values = {\r\n        peerId: peer.getPeerId(),\r\n    }\r\n    dispatch(setPeerAutoconnectDisabled(values));\r\n}\r\n\r\nconst toggleDeleteModal = () => {\r\n    setStyleBody(!styleBody)\r\n    setSaved(false)\r\n    setTimeout(()=>{ setDeleteModalOpen(!deleteModalOpen) },20)\r\n}\r\n\r\nconst toggleSavePeerModal = (param, type) => {\r\n    setStyleBody(!styleBody)\r\n    setTimeout(()=>{ setSavePeerModalOpen(!savePeerModalOpen) },20)\r\n}\r\n\r\nconst handleModalClick = (e) => {\r\n    e.stopPropagation()\r\n}\r\n\r\n\r\nreturn(\r\n    <div>\r\n\r\n      <div className=\"bookmarks-wrapper\">\r\n        <div className=\"bookmarks-header-wrapper\">\r\n            <div className=\"profile-header-back\">\r\n                <div onClick={()=>window.history.back()} className=\"header-back-wrapper\">\r\n                    <ICON_ARROWBACK/>\r\n                </div>\r\n            </div>\r\n            <div className=\"bookmarks-header-content\">\r\n                <div className=\"bookmarks-header-name\">\r\n                    {peer && peer.getPeerName()}\r\n                </div>\r\n                <div className=\"bookmarks-header-squeaks\">\r\n                    {props.match.params.host}:{props.match.params.port}\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div className=\"listp-details-wrap\">\r\n            <div className=\"bookmarks-header-name\">{peer && peer.getPeerName()}</div>\r\n            <div className=\"list-owner-wrap\">\r\n                <div>{props.match.params.host}:{props.match.params.port}</div>\r\n            </div>\r\n\r\n            <div className=\"profile-options\">\r\n            {peer &&\r\n              <div onClick={(e)=>toggleDeleteModal()}\r\n               className='peer-connect-button'>\r\n                  <span>Delete</span>\r\n              </div>\r\n            }\r\n            {!peer &&\r\n              <div onClick={(e)=>toggleSavePeerModal('edit')}\r\n               className='profiles-create-button'>\r\n                  <span>Add Saved Peer</span>\r\n              </div>\r\n            }\r\n            </div>\r\n\r\n            <div className=\"profile-options\">\r\n            {peer &&\r\n              <div onClick={(e)=>\r\n                peer.getAutoconnect() ?\r\n                setIsNotAutoconnect(e,peer.getPeerId()) :\r\n                setIsAutoconnect(e,peer.getPeerId())\r\n              }\r\n               className={peer.getAutoconnect() ? 'enable-btn-wrap disable-switch' : 'enable-btn-wrap'}>\r\n                  <span><span>{ peer.getAutoconnect() ? 'Enabled' : 'Disabled'}</span></span>\r\n              </div>\r\n            }\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div className=\"feed-wrapper\">\r\n              <div className=\"feed-trending-card\">\r\n                  <div className=\"feed-card-trend\">\r\n                      <div>Number of downloads</div>\r\n                      <div>TODO</div>\r\n                  </div>\r\n                  <div className=\"feed-card-trend\">\r\n                      <div>Number of purchases</div>\r\n                      <div>TODO</div>\r\n                  </div>\r\n                  <div className=\"feed-card-trend\">\r\n                      <div>Last connection time</div>\r\n                      <div>TODO</div>\r\n                  </div>\r\n              </div>\r\n        </div>\r\n\r\n\r\n    </div>\r\n\r\n    {/* Modal for delete profile */}\r\n    <div onClick={()=>toggleDeleteModal()} style={{display: deleteModalOpen ? 'block' : 'none'}} className=\"modal-edit\">\r\n        <div onClick={(e)=>handleModalClick(e)} className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n                <div className=\"modal-closeIcon\">\r\n                    <div onClick={()=>toggleDeleteModal()} className=\"modal-closeIcon-wrap\">\r\n                        <ICON_CLOSE />\r\n                    </div>\r\n                </div>\r\n                <p className=\"modal-title\">'Delete Peer'</p>\r\n                <div className=\"save-modal-wrapper\">\r\n                    <div onClick={deletePeer} className=\"save-modal-btn\">\r\n                        Delete\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    {/* Modal for create save peer */}\r\n    <div onClick={()=>toggleSavePeerModal()} style={{display: savePeerModalOpen ? 'block' : 'none'}} className=\"modal-edit\">\r\n        <div onClick={(e)=>handleModalClick(e)} className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n                <div className=\"modal-closeIcon\">\r\n                    <div onClick={()=>toggleSavePeerModal()} className=\"modal-closeIcon-wrap\">\r\n                        <ICON_CLOSE />\r\n                    </div>\r\n                </div>\r\n                <p className=\"modal-title\">Save Peer</p>\r\n\r\n                <div className=\"save-modal-wrapper\">\r\n                    <div onClick={savePeer} className=\"save-modal-btn\">\r\n                        Submit\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n                <form className=\"edit-form\">\r\n                <div className=\"edit-input-wrap\">\r\n                    <div className=\"edit-input-content\">\r\n                        <label>Name</label>\r\n                        <input onChange={(e)=>setName(e.target.value)} type=\"text\" name=\"name\" className=\"edit-input\"/>\r\n                    </div>\r\n                </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n    </div>\r\n    )\r\n}\r\n\r\nexport default withRouter(Peer)\r\n"],"sourceRoot":""}