{"version":3,"sources":["components/Profile/index.js"],"names":["withRouter","props","useState","activeTab","setActiveTab","moreMenu","setMoreMenu","privateKey","setPrivateKey","editModalOpen","setEditModalOpen","changeImageModalOpen","setChangeImageModalOpen","deleteModalOpen","setDeleteModalOpen","exportModalOpen","setExportModalOpen","spendingModalOpen","setSpendingModalOpen","createModalOpen","setCreateModalOpen","tab","setTab","styleBody","setStyleBody","userParam","match","params","username","profileSqueaks","useSelector","selectProfileSqueaks","lastUserSqueak","selectLastProfileSqueak","profileSqueaksStatus","selectProfileSqueaksStatus","user","selectCurrentProfile","dispatch","useDispatch","useEffect","window","scrollTo","fetchProfile","reloadSqueaks","isInitialMount","useRef","current","document","getElementsByTagName","style","cssText","changeTab","editProfile","values","setRenameProfile","profileId","getProfileId","profileName","name","toggleEditModal","deleteProfile","console","log","setDeleteProfile","toggleDeleteModal","exportPrivateKey","getProfilePrivateKey","then","unwrapResult","createContactProfile","setCreateContactProfile","pubkey","toggleCreateModal","param","type","setTimeout","toggleChangeImageModal","toggleExportModal","toggleSpendingModal","handleModalClick","e","stopPropagation","uploadAvatar","file","reader","FileReader","addEventListener","imageBase64Stripped","result","split","uploadAvatarAsBase64","readAsDataURL","imageBase64","setProfileImage","clearProfileSqueaks","fetchProfileSqueaks","profilePubkey","limit","lastSqueak","openMore","AddContactProfileForm","onSubmit","className","class","label","placeholder","defaultValue","readOnly","disabled","fontSize","color","EditProfileForm","ChangeProfileImageForm","src","getProfileImageSrcString","alt","onChange","getElementById","files","changeAvatar","title","id","opacity","DeleteProfileForm","ExportPrivateKeyForm","initialValue","onClick","history","back","display","top","getBoundingClientRect","left","height","handleMenuClick","getHasPrivateKey","getFollowing","setUnfollowProfile","unfollowUser","setFollowProfile","followUser","getProfileName","key","map","t","getReplyTo","squeak","getSqueakHash","getAuthor","getLikedTimeMs","length","squeakLst","slice","getMoreSqueaks"],"mappings":"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","file":"static/js/5.01c68ef6.chunk.js","sourcesContent":["import React , { useEffect, useState, useContext, useRef} from 'react'\r\nimport './style.scss'\r\nimport { ICON_ARROWBACK, ICON_MARKDOWN, ICON_DATE, ICON_CLOSE, ICON_UPLOAD, ICON_NEWMSG, ICON_SETTINGS, ICON_DARK } from '../../Icons'\r\nimport { withRouter, Link } from 'react-router-dom'\r\nimport { getProfileImageSrcString } from '../../squeakimages/images';\r\nimport Loader from '../Loader'\r\nimport moment from 'moment'\r\nimport SqueakCard from '../SqueakCard'\r\nimport {API_URL} from '../../config'\r\n\r\nimport { Form, Input, Select, Checkbox, Relevant, Debug, TextArea, Option } from 'informed';\r\n\r\n\r\nimport { unwrapResult } from '@reduxjs/toolkit'\r\nimport { useSelector } from 'react-redux'\r\nimport { useDispatch } from 'react-redux'\r\n\r\nimport {\r\n  fetchProfile,\r\n  setFollowProfile,\r\n  setUnfollowProfile,\r\n  selectCurrentProfile,\r\n  setDeleteProfile,\r\n  setRenameProfile,\r\n  setCreateContactProfile,\r\n  setProfileImage,\r\n  setClearProfileImage,\r\n  getProfilePrivateKey,\r\n} from '../../features/profiles/profilesSlice'\r\nimport {\r\n  fetchProfileSqueaks,\r\n  selectProfileSqueaks,\r\n  selectLastProfileSqueak,\r\n  selectProfileSqueaksStatus,\r\n  clearProfileSqueaks,\r\n} from '../../features/squeaks/squeaksSlice'\r\n\r\n\r\nconst Profile = (props) => {\r\n  const [activeTab, setActiveTab] = useState('Squeaks')\r\n  const [moreMenu, setMoreMenu] = useState(false)\r\n  const [privateKey, setPrivateKey] = useState('')\r\n  const [editModalOpen, setEditModalOpen] = useState(false)\r\n  const [changeImageModalOpen, setChangeImageModalOpen] = useState(false)\r\n  const [deleteModalOpen, setDeleteModalOpen] = useState(false)\r\n  const [exportModalOpen, setExportModalOpen] = useState(false)\r\n  const [spendingModalOpen, setSpendingModalOpen] = useState(false)\r\n  const [createModalOpen, setCreateModalOpen] = useState(false)\r\n  const [tab, setTab] = useState('Sats Spent')\r\n  const [styleBody, setStyleBody] = useState(false)\r\n  const userParam = props.match.params.username\r\n\r\n  const profileSqueaks = useSelector(selectProfileSqueaks);\r\n  const lastUserSqueak = useSelector(selectLastProfileSqueak);\r\n  const profileSqueaksStatus = useSelector(selectProfileSqueaksStatus);\r\n  // const privateKey = 'TODO';\r\n\r\n  const user = useSelector(selectCurrentProfile);\r\n  const dispatch = useDispatch();\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n    dispatch(fetchProfile(props.match.params.username));\r\n    reloadSqueaks();\r\n    //preventing edit modal from apprearing after clicking a user on memOpen\r\n    setEditModalOpen(false)\r\n  }, [props.match.params.username])\r\n\r\n  const isInitialMount = useRef(true);\r\n  useEffect(() => {\r\n    if (isInitialMount.current){ isInitialMount.current = false }\r\n    else {\r\n      document.getElementsByTagName(\"body\")[0].style.cssText = styleBody && \"overflow-y: hidden; margin-right: 17px\"\r\n    }\r\n  }, [styleBody])\r\n\r\n  useEffect( () => () => document.getElementsByTagName(\"body\")[0].style.cssText = \"\", [] )\r\n\r\n  const changeTab = (tab) => {\r\n    setActiveTab(tab)\r\n  }\r\n\r\n  const editProfile = ({values}) => {\r\n    dispatch(setRenameProfile({\r\n      profileId: user.getProfileId(),\r\n      profileName: values.name,\r\n    }));\r\n    // TODO: chain action to update profile squeaks with the new name.\r\n    toggleEditModal()\r\n  }\r\n\r\n  const deleteProfile = () => {\r\n    let values = {\r\n      profileId: user.getProfileId(),\r\n    }\r\n    console.log('Delete user here');\r\n    dispatch(setDeleteProfile(values));\r\n    toggleDeleteModal();\r\n  }\r\n\r\n\r\n  const exportPrivateKey = () => {\r\n    dispatch(getProfilePrivateKey({\r\n      profileId: user.getProfileId(),\r\n    }))\r\n    .then(unwrapResult)\r\n    .then((privateKey) =>{\r\n      console.log(privateKey);\r\n      setPrivateKey(privateKey);\r\n    });\r\n  }\r\n\r\n  const createContactProfile = ({values}) => {\r\n    dispatch(setCreateContactProfile({\r\n      pubkey: userParam,\r\n      profileName: values.name,\r\n    }))\r\n    .then(() => {\r\n      dispatch(fetchProfile(props.match.params.username));\r\n    });\r\n    toggleCreateModal();\r\n  }\r\n\r\n  const toggleEditModal = (param, type) => {\r\n    setMoreMenu(false);\r\n    setStyleBody(!styleBody)\r\n    setTimeout(()=>{ setEditModalOpen(!editModalOpen) },20)\r\n  }\r\n\r\n  const toggleChangeImageModal = (param, type) => {\r\n    setMoreMenu(false);\r\n    setStyleBody(!styleBody)\r\n    setTimeout(()=>{ setChangeImageModalOpen(!changeImageModalOpen) },20)\r\n  }\r\n\r\n  const toggleDeleteModal = () => {\r\n    setMoreMenu(false);\r\n    setStyleBody(!styleBody)\r\n    setTimeout(()=>{ setDeleteModalOpen(!deleteModalOpen) },20)\r\n  }\r\n\r\n  const toggleExportModal = () => {\r\n    setMoreMenu(false);\r\n    setStyleBody(!styleBody)\r\n    setTimeout(()=>{ setExportModalOpen(!exportModalOpen) },20)\r\n  }\r\n\r\n  const toggleSpendingModal = (param, type) => {\r\n    setStyleBody(!styleBody)\r\n    if(type){setTab(type)}\r\n    if(type){setTab(type)}\r\n    setTimeout(()=>{ setSpendingModalOpen(!spendingModalOpen) },20)\r\n  }\r\n\r\n  const toggleCreateModal = (param, type) => {\r\n    setStyleBody(!styleBody)\r\n    setTimeout(()=>{ setCreateModalOpen(!createModalOpen) },20)\r\n  }\r\n\r\n  const handleModalClick = (e) => {\r\n    e.stopPropagation()\r\n  }\r\n\r\n  const followUser = (e,id) => {\r\n    e.stopPropagation()\r\n    dispatch(setFollowProfile(id));\r\n  }\r\n\r\n  const unfollowUser = (e,id) => {\r\n    console.log(e);\r\n    e.stopPropagation()\r\n    dispatch(setUnfollowProfile(id));\r\n  }\r\n\r\n  const changeAvatar = () => {\r\n    let file = document.getElementById('avatar').files[0];\r\n    uploadAvatar(file);\r\n    toggleChangeImageModal();\r\n  }\r\n\r\n  const clearAvatar = () => {\r\n    dispatch(setClearProfileImage({\r\n      profileId: user.getProfileId(),\r\n    }));\r\n  }\r\n\r\n  const uploadAvatar = (file) => {\r\n    if (file == null)\r\n    return;\r\n    const reader = new FileReader();\r\n    reader.addEventListener('load', () => {\r\n      // convert image file to base64 string\r\n      // preview.src = reader.result;\r\n      const imageBase64Stripped = reader.result.split(',')[1];\r\n      uploadAvatarAsBase64(imageBase64Stripped);\r\n    }, false);\r\n    if (file) {\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const uploadAvatarAsBase64 = (imageBase64) => {\r\n    dispatch(setProfileImage({\r\n      profileId: user.getProfileId(),\r\n      imageBase64: imageBase64,\r\n    }));\r\n  };\r\n\r\n  const getLastSqueak = (squeakLst) => {\r\n    if (squeakLst == null) {\r\n      return null;\r\n    } if (squeakLst.length === 0) {\r\n      return null;\r\n    }\r\n    return squeakLst.slice(-1)[0];\r\n  };\r\n\r\n  const getMoreSqueaks = () => {\r\n    let lastSqueak = getLastSqueak(profileSqueaks);\r\n    dispatch(fetchProfileSqueaks({\r\n      profilePubkey: props.match.params.username,\r\n      limit: 10,\r\n      lastSqueak: lastUserSqueak,\r\n    }));\r\n  }\r\n\r\n  const reloadSqueaks = () => {\r\n    dispatch(clearProfileSqueaks());\r\n    dispatch(fetchProfileSqueaks({\r\n      profilePubkey: props.match.params.username,\r\n      limit: 10,\r\n      lastSqueak: null,\r\n    }));\r\n  }\r\n\r\n  const openMore = () => { setMoreMenu(!moreMenu) }\r\n\r\n  const handleMenuClick = (e) => { e.stopPropagation() }\r\n\r\n\r\n  const AddContactProfileForm = () => (\r\n    <Form onSubmit={createContactProfile} className=\"Squeak-input-side\">\r\n      <div className=\"edit-input-wrap\">\r\n        <Input class=\"informed-input\" name=\"name\" label=\"Profile Name\" placeholder=\"Satoshi\" />\r\n      </div>\r\n      <div className=\"edit-input-wrap\">\r\n        <Input class=\"informed-input\" name=\"pubkey\" label=\"Public Key\" defaultValue={userParam} readOnly disabled />\r\n      </div>\r\n      <div className=\"inner-input-links\">\r\n        <div className=\"input-links-side\">\r\n        </div>\r\n        <div className=\"squeak-btn-holder\">\r\n          <div style={{ fontSize: '13px', color: null }}>\r\n          </div>\r\n          <button type=\"submit\" className={'squeak-btn-side squeak-btn-active'}>\r\n            Submit\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </Form>\r\n  );\r\n\r\n  const EditProfileForm = () => (\r\n    <Form onSubmit={editProfile} className=\"Squeak-input-side\">\r\n      <div className=\"edit-input-wrap\">\r\n        <Input class=\"informed-input\" name=\"name\" label=\"Profile Name\" placeholder=\"Satoshi\" />\r\n      </div>\r\n      <div className=\"inner-input-links\">\r\n        <div className=\"input-links-side\">\r\n        </div>\r\n        <div className=\"squeak-btn-holder\">\r\n          <div style={{ fontSize: '13px', color: null }}>\r\n          </div>\r\n          <button type=\"submit\" className={'squeak-btn-side squeak-btn-active'}>\r\n            Submit\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </Form>\r\n  );\r\n\r\n  const ChangeProfileImageForm = () => (\r\n    <Form onSubmit={uploadAvatar} className=\"Squeak-input-side\">\r\n      <div className=\"modal-profile-pic\">\r\n        <div className=\"modal-back-pic\">\r\n          <img src={user ? `${getProfileImageSrcString(user)}` : null} alt=\"profile\" />\r\n          <div>\r\n            <ICON_UPLOAD/>\r\n            <input onChange={()=>changeAvatar()} title=\" \" id=\"avatar\" style={{opacity:'0'}} type=\"file\"/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Form>\r\n  );\r\n\r\n\r\n  const DeleteProfileForm = () => (\r\n    <Form onSubmit={deleteProfile} className=\"Squeak-input-side\">\r\n      <div className=\"inner-input-links\">\r\n        <div className=\"input-links-side\">\r\n        </div>\r\n        <div className=\"squeak-btn-holder\">\r\n          <div style={{ fontSize: '13px', color: null }}>\r\n          </div>\r\n          <button type=\"submit\" className={'squeak-btn-side squeak-btn-active'}>\r\n            Delete\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </Form>\r\n  );\r\n\r\n  const ExportPrivateKeyForm = () => (\r\n    <Form onSubmit={exportPrivateKey} className=\"Squeak-input-side\">\r\n      <div className=\"edit-input-wrap\">\r\n        <Input class=\"informed-input\" name=\"privateKey\" label=\"Display Private Key\" initialValue={privateKey} readOnly />\r\n      </div>\r\n      <div className=\"inner-input-links\">\r\n        <div className=\"input-links-side\">\r\n        </div>\r\n        <div className=\"squeak-btn-holder\">\r\n          <div style={{ fontSize: '13px', color: null }}>\r\n          </div>\r\n          <button type=\"submit\" className={'squeak-btn-side squeak-btn-active'}>\r\n            Export\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </Form>\r\n  );\r\n\r\n  return(\r\n    <div>\r\n      <div>\r\n        <div className=\"profile-wrapper\">\r\n          <div className=\"profile-header-wrapper\">\r\n            <div className=\"profile-header-back\">\r\n              <div onClick={()=>window.history.back()} className=\"header-back-wrapper\">\r\n                <ICON_ARROWBACK/>\r\n              </div>\r\n            </div>\r\n            <div className=\"profile-header-content\">\r\n              <div className=\"profile-header-name\">\r\n                {userParam}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"profile-banner-wrapper\">\r\n            <img alt=\"\"/>\r\n          </div>\r\n          <div className=\"profile-details-wrapper\">\r\n            <div className=\"profile-options\">\r\n              <div className=\"profile-image-wrapper\">\r\n                <img src={user ? `${getProfileImageSrcString(user)}` : null} alt=\"\"/>\r\n              </div>\r\n\r\n              {user &&\r\n                <div id=\"profileMoreMenu\" onClick={openMore} className=\"Nav-link\">\r\n                  <div className={\"Nav-item-hover\"}>\r\n                    <ICON_SETTINGS  />\r\n                  </div>\r\n                  <div onClick={()=>openMore()} style={{display: moreMenu ? 'block' : 'none'}} className=\"more-menu-background\">\r\n                    <div className=\"more-modal-wrapper\">\r\n                      {moreMenu ?\r\n                        <div style={{\r\n                            top: document.getElementById('profileMoreMenu') && `${document.getElementById('profileMoreMenu').getBoundingClientRect().top - 40}px`,\r\n                            left: document.getElementById('profileMoreMenu') && `${document.getElementById('profileMoreMenu').getBoundingClientRect().left}px`,\r\n                            height: '210px',\r\n                          }} onClick={(e)=>handleMenuClick(e)} className=\"more-menu-content\">\r\n                          <div onClick={toggleEditModal} className=\"more-menu-item\">\r\n                            <span>Edit Profile</span>\r\n                          </div>\r\n                          <div onClick={toggleChangeImageModal} className=\"more-menu-item\">\r\n                            <span>Change Image</span>\r\n                          </div>\r\n                          {user.getHasPrivateKey() &&\r\n                            <div onClick={toggleExportModal} className=\"more-menu-item\">\r\n                              <span>Export Private Key</span>\r\n                            </div>\r\n                          }\r\n                          <div onClick={toggleDeleteModal} className=\"more-menu-item\">\r\n                            <span>Delete Profile</span>\r\n                          </div>\r\n                        </div> : null }\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                }\r\n\r\n                {user &&\r\n                  <div onClick={(e)=>\r\n                      user.getFollowing() ?\r\n                      unfollowUser(e,user.getProfileId()) :\r\n                      followUser(e,user.getProfileId())\r\n                    }\r\n                    className={user.getFollowing() ? 'unfollow-switch profile-edit-button' : 'profile-edit-button'}>\r\n                    <span><span>{ user.getFollowing() ? 'Following' : 'Follow'}</span></span>\r\n                  </div>\r\n                }\r\n\r\n                {!user &&\r\n                  <div onClick={(e)=>toggleCreateModal('create')}\r\n                    className='profiles-create-button'>\r\n                    <span>Add Contact Profile</span>\r\n                  </div>\r\n                }\r\n              </div>\r\n              <div className=\"profile-details-box\">\r\n                <div className=\"profile-name\">{user ? user.getProfileName() : ''}</div>\r\n                <div className=\"profile-username\">@{userParam}</div>\r\n                <div className=\"profile-info-box\">\r\n                  &nbsp;\r\n                </div>\r\n              </div>\r\n              <div className=\"profile-social-box\">\r\n                {/* TODO: Implement sats spent */}\r\n                <div onClick={()=>toggleSpendingModal('members','Sats Spent')}>\r\n                  <p className=\"follow-num\"> 0 </p>\r\n                  <p className=\"follow-text\"> sats spent </p>\r\n                </div>\r\n                {/* TODO: Implement sats eaned */}\r\n                <div onClick={()=>toggleSpendingModal('members', 'Sats Earned')}>\r\n                  <p className=\"follow-num\"> 0 </p>\r\n                  <p className=\"follow-text\"> sats earned </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"profile-nav-menu\">\r\n              <div key={'squeaks'} onClick={()=>changeTab('Squeaks')} className={activeTab ==='Squeaks' ? `profile-nav-item activeTab` : `profile-nav-item`}>\r\n                Squeaks\r\n              </div>\r\n              <div key={'replies'} onClick={()=>changeTab('Squeaks&Replies')} className={activeTab ==='Squeaks&Replies' ? `profile-nav-item activeTab` : `profile-nav-item`}>\r\n                Squeaks & replies\r\n              </div>\r\n              <div key={'liked'} onClick={()=>changeTab('Liked')} className={activeTab ==='Liked' ? `profile-nav-item activeTab` : `profile-nav-item`}>\r\n                Liked\r\n              </div>\r\n            </div>\r\n            {activeTab === 'Squeaks' ?\r\n              profileSqueaks.map(t=>{\r\n                if(!t.getReplyTo())\r\n                return <SqueakCard squeak={t} key={t.getSqueakHash()} id={t.getSqueakHash()} user={t.getAuthor()} />\r\n              }) :\r\n              activeTab === 'Squeaks&Replies' ?\r\n              profileSqueaks.map(t=>{\r\n                return <SqueakCard squeak={t} key={t.getSqueakHash()} id={t.getSqueakHash()} user={t.getAuthor()} />\r\n              }) :\r\n              activeTab === 'Liked' ?\r\n              profileSqueaks.map(t=>{\r\n                if(t.getLikedTimeMs())\r\n                return <SqueakCard squeak={t} key={t.getSqueakHash()} id={t.getSqueakHash()} user={t.getAuthor()} />\r\n              }) :\r\n              null}\r\n              {/* TODO: fix get loading state by doing this: https://medium.com/stashaway-engineering/react-redux-tips-better-way-to-handle-loading-flags-in-your-reducers-afda42a804c6 */}\r\n              {profileSqueaks.length > 0 &&\r\n                <>\r\n                {profileSqueaksStatus == 'loading' ?\r\n                  <Loader /> :\r\n                    <div onClick={() => getMoreSqueaks()} className='squeak-btn-side squeak-btn-active'>\r\n                      Load more\r\n                    </div>}\r\n                    </>\r\n                }\r\n\r\n              </div>\r\n\r\n              {/* Modal for edit profile */}\r\n              <div onClick={()=>toggleEditModal()} style={{display: editModalOpen ? 'block' : 'none'}} className=\"modal-edit\">\r\n                <div onClick={(e)=>handleModalClick(e)} className=\"modal-content\">\r\n                  <div className=\"modal-header\">\r\n                    <div className=\"modal-closeIcon\">\r\n                      <div onClick={()=>toggleEditModal()} className=\"modal-closeIcon-wrap\">\r\n                        <ICON_CLOSE />\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"modal-title\">Edit Profile</p>\r\n                  </div>\r\n                  <div className=\"modal-body\">\r\n                    <EditProfileForm />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Modal for change profile image */}\r\n              <div onClick={()=>toggleChangeImageModal()} style={{display: changeImageModalOpen ? 'block' : 'none'}} className=\"modal-edit\">\r\n                <div onClick={(e)=>handleModalClick(e)} className=\"modal-content\">\r\n                  <div className=\"modal-header\">\r\n                    <div className=\"modal-closeIcon\">\r\n                      <div onClick={()=>toggleChangeImageModal()} className=\"modal-closeIcon-wrap\">\r\n                        <ICON_CLOSE />\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"modal-title\">Change Profile Image</p>\r\n                  </div>\r\n                  <div className=\"modal-body\">\r\n                    <div className=\"modal-banner\">\r\n                    </div>\r\n                    <ChangeProfileImageForm />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n\r\n              {/* Modal for delete profile */}\r\n              <div onClick={()=>toggleDeleteModal()} style={{display: deleteModalOpen ? 'block' : 'none'}} className=\"modal-edit\">\r\n                <div onClick={(e)=>handleModalClick(e)} className=\"modal-content\">\r\n                  <div className=\"modal-header\">\r\n                    <div className=\"modal-closeIcon\">\r\n                      <div onClick={()=>toggleDeleteModal()} className=\"modal-closeIcon-wrap\">\r\n                        <ICON_CLOSE />\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"modal-title\">Delete Profile</p>\r\n                  </div>\r\n\r\n                  <div className=\"modal-body\">\r\n                    <DeleteProfileForm />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Modal for export profile */}\r\n              <div onClick={()=>toggleExportModal()} style={{display: exportModalOpen ? 'block' : 'none'}} className=\"modal-edit\">\r\n                <div onClick={(e)=>handleModalClick(e)} className=\"modal-content\">\r\n                  <div className=\"modal-header\">\r\n                    <div className=\"modal-closeIcon\">\r\n                      <div onClick={()=>toggleExportModal()} className=\"modal-closeIcon-wrap\">\r\n                        <ICON_CLOSE />\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"modal-title\">Export Private Key</p>\r\n                  </div>\r\n\r\n                  <div className=\"modal-body\">\r\n                    <ExportPrivateKeyForm />\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n\r\n\r\n              {/* Modal for sats spent and earned */}\r\n              <div onClick={()=>toggleSpendingModal()} style={{display: spendingModalOpen ? 'block' : 'none'}} className=\"modal-edit\">\r\n                <div onClick={(e)=>handleModalClick(e)} className=\"modal-content\">\r\n                  <div className=\"modal-header no-b-border\">\r\n                    <div className=\"modal-closeIcon\">\r\n                      <div onClick={()=>toggleEditModal()} className=\"modal-closeIcon-wrap\">\r\n                        <ICON_CLOSE />\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"modal-title\">{null}</p>\r\n                  </div>\r\n                  <div className=\"modal-body\">\r\n                    <div className=\"explore-nav-menu\">\r\n                      <div onClick={()=>setTab('Sats Spent')} className={tab =='Sats Spent' ? `explore-nav-item activeTab` : `explore-nav-item`}>\r\n                        Sats Spent\r\n                      </div>\r\n                      <div onClick={()=>setTab('Sats Earned')} className={tab =='Sats Earned' ? `explore-nav-item activeTab` : `explore-nav-item`}>\r\n                        Sats Earned\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"modal-scroll\">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Modal for create contact profile */}\r\n              <div onClick={()=>toggleCreateModal()} style={{display: createModalOpen ? 'block' : 'none'}} className=\"modal-edit\">\r\n                <div onClick={(e)=>handleModalClick(e)} className=\"modal-content\">\r\n                  <div className=\"modal-header\">\r\n                    <div className=\"modal-closeIcon\">\r\n                      <div onClick={()=>toggleCreateModal()} className=\"modal-closeIcon-wrap\">\r\n                        <ICON_CLOSE />\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"modal-title\">Add Contact Profile</p>\r\n                  </div>\r\n\r\n                  <div className=\"modal-body\">\r\n                    <AddContactProfileForm />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n\r\n            </div>\r\n          </div>\r\n        )\r\n      }\r\n\r\n      export default withRouter(Profile)\r\n"],"sourceRoot":""}