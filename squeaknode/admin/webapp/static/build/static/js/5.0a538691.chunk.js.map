{"version":3,"sources":["components/Profile/index.js"],"names":["withRouter","props","useState","activeTab","setActiveTab","moreMenu","setMoreMenu","editName","setName","privateKey","setPrivateKey","editModalOpen","setEditModalOpen","deleteModalOpen","setDeleteModalOpen","exportModalOpen","setExportModalOpen","spendingModalOpen","setSpendingModalOpen","createModalOpen","setCreateModalOpen","setSaved","tab","setTab","styleBody","setStyleBody","userParam","match","params","username","profileSqueaks","useSelector","selectProfileSqueaks","lastUserSqueak","selectLastProfileSqueak","profileSqueaksStatus","selectProfileSqueaksStatus","user","selectCurrentProfile","dispatch","useDispatch","useEffect","window","scrollTo","fetchProfile","reloadSqueaks","isInitialMount","useRef","current","document","getElementsByTagName","style","cssText","changeTab","toggleEditModal","param","type","getProfileName","setTimeout","toggleDeleteModal","toggleExportModal","toggleSpendingModal","toggleCreateModal","handleModalClick","e","stopPropagation","uploadAvatar","file","reader","FileReader","addEventListener","imageBase64Stripped","result","split","uploadAvatarAsBase64","readAsDataURL","imageBase64","setProfileImage","profileId","getProfileId","clearProfileSqueaks","fetchProfileSqueaks","profilePubkey","limit","lastSqueak","openMore","console","log","className","onClick","history","back","alt","src","getProfileImageSrcString","id","display","top","getElementById","getBoundingClientRect","left","height","handleMenuClick","getHasPrivateKey","getFollowing","setUnfollowProfile","unfollowUser","setFollowProfile","followUser","key","map","t","getReplyTo","squeak","getSqueakHash","getAuthor","length","squeakLst","slice","getMoreSqueaks","setClearProfileImage","setRenameProfile","profileName","onChange","files","changeAvatar","title","opacity","defaultValue","target","value","name","values","setDeleteProfile","getProfilePrivateKey","then","unwrapResult","readOnly","setCreateContactProfile","pubkey"],"mappings":"kRAgiBqBA,uBA7fL,SAACC,GAAW,IAAD,EACSC,mBAAS,WADlB,mBAClBC,EADkB,KACPC,EADO,OAEOF,oBAAS,GAFhB,mBAElBG,EAFkB,KAERC,EAFQ,OAGGJ,mBAAS,IAHZ,mBAGlBK,EAHkB,KAGRC,EAHQ,OAIWN,mBAAS,IAJpB,mBAIlBO,EAJkB,KAINC,EAJM,OAKiBR,oBAAS,GAL1B,mBAKlBS,EALkB,KAKHC,EALG,OAMqBV,oBAAS,GAN9B,mBAMlBW,EANkB,KAMDC,EANC,OAOqBZ,oBAAS,GAP9B,mBAOlBa,EAPkB,KAODC,EAPC,OAQyBd,oBAAS,GARlC,mBAQlBe,EARkB,KAQCC,EARD,OASqBhB,oBAAS,GAT9B,mBASlBiB,EATkB,KASDC,EATC,OAUClB,oBAAS,GAVV,mBAUXmB,GAVW,aAWHnB,mBAAS,cAXN,mBAWlBoB,EAXkB,KAWbC,GAXa,QAYSrB,oBAAS,GAZlB,qBAYlBsB,GAZkB,MAYPC,GAZO,MAanBC,GAAYzB,EAAM0B,MAAMC,OAAOC,SAE/BC,GAAiBC,YAAYC,KAC7BC,GAAiBF,YAAYG,KAC7BC,GAAuBJ,YAAYK,KAGnCC,GAAON,YAAYO,KACnBC,GAAWC,cAIjBC,qBAAU,WACRC,OAAOC,SAAS,EAAG,GACnBJ,GAASK,YAAa3C,EAAM0B,MAAMC,OAAOC,WACzCgB,KAEAjC,GAAiB,GACjBJ,EAAQ,MACP,CAACP,EAAM0B,MAAMC,OAAOC,WAEvB,IAAMiB,GAAiBC,kBAAO,GAC9BN,qBAAU,WACJK,GAAeE,QAAUF,GAAeE,SAAU,EAEpDC,SAASC,qBAAqB,QAAQ,GAAGC,MAAMC,QAAU5B,IAAa,2CAEvE,CAACA,KAEJiB,qBAAW,kBAAM,kBAAMQ,SAASC,qBAAqB,QAAQ,GAAGC,MAAMC,QAAU,MAAI,IAEpF,IAAMC,GAAY,SAAC/B,GACjBlB,EAAakB,IAkDTgC,GAAkB,SAACC,EAAOC,GAC9B/B,IAAcD,IACdH,GAAS,GACTb,EAAQ6B,GAAKoB,kBACbC,YAAW,WAAM9C,GAAkBD,KAAiB,KAGhDgD,GAAoB,WACxBlC,IAAcD,IACdH,GAAS,GACTqC,YAAW,WAAM5C,GAAoBD,KAAmB,KAGpD+C,GAAoB,WACxBnC,IAAcD,IACdH,GAAS,GACTqC,YAAW,WAAM1C,GAAoBD,KAAmB,KAGpD8C,GAAsB,SAACN,EAAOC,GAClC/B,IAAcD,IACXgC,GAAMjC,GAAOiC,GACbA,GAAMjC,GAAOiC,GAChBE,YAAW,WAAMxC,GAAsBD,KAAqB,KAGxD6C,GAAoB,SAACP,EAAOC,GAChC/B,IAAcD,IACdH,GAAS,GACTqC,YAAW,WAAMtC,GAAoBD,KAAmB,KAGpD4C,GAAmB,SAACC,GACxBA,EAAEC,mBA2BEC,GAAe,SAACC,GACpB,GAAY,MAARA,EAAJ,CAEA,IAAMC,EAAS,IAAIC,WACnBD,EAAOE,iBAAiB,QAAQ,WAG9B,IAAMC,EAAsBH,EAAOI,OAAOC,MAAM,KAAK,GACrDC,GAAqBH,MACpB,GACCJ,GACFC,EAAOO,cAAcR,KAInBO,GAAuB,SAACE,GAC5BrC,GAASsC,YAAgB,CACvBC,UAAWzC,GAAK0C,eAChBH,YAAaA,KAEfvD,GAAS,GACTiC,MAqBIT,GAAgB,WACpBN,GAASyC,eACTzC,GAAS0C,YAAoB,CAC3BC,cAAejF,EAAM0B,MAAMC,OAAOC,SAClCsD,MAAO,GACPC,WAAY,SAIVC,GAAW,WAAQ/E,GAAaD,IAMtC,OAFAiF,QAAQC,IAAIlD,IAAQA,GAAKoB,kBAGvB,6BACE,6BACE,yBAAK+B,UAAU,mBACb,yBAAKA,UAAU,0BACb,yBAAKA,UAAU,uBACb,yBAAKC,QAAS,kBAAI/C,OAAOgD,QAAQC,QAAQH,UAAU,uBACjD,kBAAC,IAAD,QAGJ,yBAAKA,UAAU,0BACb,yBAAKA,UAAU,uBACZ9D,MAIP,yBAAK8D,UAAU,0BACb,yBAAKI,IAAI,MAEX,yBAAKJ,UAAU,2BACb,yBAAKA,UAAU,mBACb,yBAAKA,UAAU,yBACb,yBAAKK,IAAKxD,GAAI,UAAMyD,YAAyBzD,KAAU,KAAMuD,IAAI,MAGlEvD,IACC,yBAAK0D,GAAG,kBAAkBN,QAASJ,GAAUG,UAAU,YACrD,yBAAKA,UAAW,kBACd,kBAAC,IAAD,OAEF,yBAAKC,QAAS,kBAAIJ,MAAYlC,MAAO,CAAC6C,QAAS3F,EAAW,QAAU,QAASmF,UAAU,wBACrF,yBAAKA,UAAU,sBACZnF,EACC,yBAAK8C,MAAO,CACR8C,IAAKhD,SAASiD,eAAe,oBAAxB,UAAiDjD,SAASiD,eAAe,mBAAmBC,wBAAwBF,IAAM,GAA1H,MACLG,KAAMnD,SAASiD,eAAe,oBAAxB,UAAiDjD,SAASiD,eAAe,mBAAmBC,wBAAwBC,KAApH,MACNC,OAAQ,SACPZ,QAAS,SAACzB,GAAD,OAzCZ,SAACA,GAAQA,EAAEC,kBAyCMqC,CAAgBtC,IAAIwB,UAAU,qBAC/C,yBAAKC,QAAS9B,GAAmB6B,UAAU,kBACzC,iDAEF,yBAAKC,QAASnC,GAAiBkC,UAAU,kBACvC,+CAEDnD,GAAKkE,oBACJ,yBAAKd,QAAS7B,GAAmB4B,UAAU,kBACzC,sDAGG,QAMhBnD,IACC,yBAAKoD,QAAS,SAACzB,GAAD,OACV3B,GAAKmE,eArIJ,SAACxC,EAAE+B,GACtBT,QAAQC,IAAIvB,GACZA,EAAEC,kBACF1B,GAASkE,YAAmBV,IAmIVW,CAAa1C,EAAE3B,GAAK0C,gBA3IrB,SAACf,EAAE+B,GACpB/B,EAAEC,kBACF1B,GAASoE,YAAiBZ,IA0IRa,CAAW5C,EAAE3B,GAAK0C,iBAEpBS,UAAWnD,GAAKmE,eAAiB,sCAAwC,uBACzE,8BAAM,8BAAQnE,GAAKmE,eAAiB,YAAc,aAIpDnE,IACA,yBAAKoD,QAAS,SAACzB,GAAD,OAAKF,GAAkB,WACnC0B,UAAU,0BACV,uDAIN,yBAAKA,UAAU,uBACb,yBAAKA,UAAU,gBAAgBnD,GAAOA,GAAKoB,iBAAmB,IAC9D,yBAAK+B,UAAU,oBAAf,IAAoC9D,IACpC,yBAAK8D,UAAU,oBAAf,SAIF,yBAAKA,UAAU,sBAEb,yBAAKC,QAAS,kBAAI5B,GAAoB,EAAU,gBAC9C,uBAAG2B,UAAU,cAAb,OACA,uBAAGA,UAAU,eAAb,iBAGF,yBAAKC,QAAS,kBAAI5B,GAAoB,EAAW,iBAC/C,uBAAG2B,UAAU,cAAb,OACA,uBAAGA,UAAU,eAAb,oBAIN,yBAAKA,UAAU,oBACb,yBAAKqB,IAAK,UAAWpB,QAAS,kBAAIpC,GAAU,YAAYmC,UAAwB,YAAbrF,EAAA,iDAAnE,WAGA,yBAAK0G,IAAK,UAAWpB,QAAS,kBAAIpC,GAAU,oBAAoBmC,UAAwB,oBAAbrF,EAAA,iDAA3E,qBAGA,yBAAK0G,IAAK,QAASpB,QAAS,kBAAIpC,GAAU,UAAUmC,UAAwB,UAAbrF,EAAA,iDAA/D,SAGA,yBAAK0G,IAAK,QAASpB,QAAS,kBAAIpC,GAAU,UAAUmC,UAAwB,UAAbrF,EAAA,iDAA/D,UAIa,YAAdA,EACC2B,GAAegF,KAAI,SAAAC,GACjB,IAAIA,EAAEC,aACN,OAAO,kBAAC,IAAD,CAAYC,OAAQF,EAAGF,IAAKE,EAAEG,gBAAiBnB,GAAIgB,EAAEG,gBAAiB7E,KAAM0E,EAAEI,iBACpE,oBAAdhH,EACL2B,GAAegF,KAAI,SAAAC,GACjB,OAAO,kBAAC,IAAD,CAAYE,OAAQF,EAAGF,IAAKE,EAAEG,gBAAiBnB,GAAIgB,EAAEG,gBAAiB7E,KAAM0E,EAAEI,iBAGvF,KAGCrF,GAAesF,OAAS,GACvB,oCACyB,WAAxBjF,GACC,kBAAC,IAAD,MACE,yBAAKsD,QAAS,kBAnJT,WACrB,IAVqB4B,EACJ,OADIA,EAUUvF,KAPJ,IAArBuF,EAAUD,QAGTC,EAAUC,OAAO,GAAG,GAK3B/E,GAAS0C,YAAoB,CAC3BC,cAAejF,EAAM0B,MAAMC,OAAOC,SAClCsD,MAAO,GACPC,WAAYnD,MA8IsBsF,IAAkB/B,UAAU,qCAAhD,eASN,yBAAKC,QAAS,kBAAInC,MAAmBH,MAAO,CAAC6C,QAASrF,EAAgB,QAAU,QAAS6E,UAAU,cACjG,yBAAKC,QAAS,SAACzB,GAAD,OAAKD,GAAiBC,IAAIwB,UAAU,iBAChD,yBAAKA,UAAU,gBACb,yBAAKA,UAAU,mBACb,yBAAKC,QAAS,kBAAInC,MAAmBkC,UAAU,wBAC7C,kBAAC,IAAD,QAGJ,uBAAGA,UAAU,eAAb,kBACA,yBAAKA,UAAU,sBACb,yBAAKC,QA/ML,WAClBlD,GAASiF,YAAqB,CAC5B1C,UAAWzC,GAAK0C,kBAElB1D,GAAS,GACTiC,MA0M6CkC,UAAU,kBAArC,gBAIF,yBAAKA,UAAU,sBACb,yBAAKC,QAvTL,WAELpD,GAAK0C,eAGlBxC,GAASkF,YAAiB,CACxB3C,UAAWzC,GAAK0C,eAChB2C,YAAanH,KAGfc,GAAS,GACTiC,MA4S6CkC,UAAU,kBAArC,UAKJ,yBAAKA,UAAU,cACb,yBAAKA,UAAU,iBAEf,yBAAKA,UAAU,qBACb,yBAAKA,UAAU,kBACb,yBAAKK,IAAKxD,GAAI,UAAMyD,YAAyBzD,KAAU,KAAMuD,IAAI,YACjE,6BACE,kBAAC,IAAD,MACA,2BAAO+B,SAAU,kBAtOpB,WACnB,IAAIxD,EAAOlB,SAASiD,eAAe,UAAU0B,MAAM,GACnD1D,GAAaC,GAoO8B0D,IAAgBC,MAAM,IAAI/B,GAAG,SAAS5C,MAAO,CAAC4E,QAAQ,KAAMvE,KAAK,YAI1F,0BAAMgC,UAAU,aACd,yBAAKA,UAAU,mBACb,yBAAKA,UAAU,sBACb,uCACA,2BAAOwC,aAAc,GAAIL,SAAU,SAAC3D,GAAD,OAAKxD,EAAQwD,EAAEiE,OAAOC,QAAQ1E,KAAK,OAAO2E,KAAK,OAAO3C,UAAU,qBAUjH,yBAAKC,QAAS,kBAAI9B,MAAqBR,MAAO,CAAC6C,QAASnF,EAAkB,QAAU,QAAS2E,UAAU,cACrG,yBAAKC,QAAS,SAACzB,GAAD,OAAKD,GAAiBC,IAAIwB,UAAU,iBAChD,yBAAKA,UAAU,gBACb,yBAAKA,UAAU,mBACb,yBAAKC,QAAS,kBAAI9B,MAAqB6B,UAAU,wBAC/C,kBAAC,IAAD,QAGJ,uBAAGA,UAAU,eAAb,oBACA,yBAAKA,UAAU,sBACb,yBAAKC,QAlVH,WACpB,IAAI2C,EAAS,CACXtD,UAAWzC,GAAK0C,gBAElBO,QAAQC,IAAI,oBACZhD,GAAS8F,YAAiBD,IAC1BzE,MA4U+C6B,UAAU,kBAAvC,cASR,yBAAKC,QAAS,kBAAI7B,MAAqBT,MAAO,CAAC6C,QAASjF,EAAkB,QAAU,QAASyE,UAAU,cACrG,yBAAKC,QAAS,SAACzB,GAAD,OAAKD,GAAiBC,IAAIwB,UAAU,iBAChD,yBAAKA,UAAU,gBACb,yBAAKA,UAAU,mBACb,yBAAKC,QAAS,kBAAI7B,MAAqB4B,UAAU,wBAC/C,kBAAC,IAAD,QAGJ,uBAAGA,UAAU,eAAb,wBACA,yBAAKA,UAAU,sBACb,yBAAKC,QA3VA,WACvB,IAAI2C,EAAS,CACXtD,UAAWzC,GAAK0C,gBAElBxC,GAAS+F,YAAqBF,IAC7BG,KAAKC,KACLD,MAAK,SAAC9H,GACL6E,QAAQC,IAAI9E,GACZC,EAAcD,OAmVkC+E,UAAU,kBAA1C,YAMJ,yBAAKA,UAAU,cACb,0BAAMA,UAAU,aACd,yBAAKA,UAAU,mBACb,yBAAKA,UAAU,sBACb,8CACA,2BAAOwC,aAAcvH,EAAYgI,UAAQ,EAACjF,KAAK,OAAO2E,KAAK,OAAO3C,UAAU,qBAWxF,yBAAKC,QAAS,kBAAI5B,MAAuBV,MAAO,CAAC6C,QAAS/E,EAAoB,QAAU,QAASuE,UAAU,cACzG,yBAAKC,QAAS,SAACzB,GAAD,OAAKD,GAAiBC,IAAIwB,UAAU,iBAChD,yBAAKA,UAAU,4BACb,yBAAKA,UAAU,mBACb,yBAAKC,QAAS,kBAAInC,MAAmBkC,UAAU,wBAC7C,kBAAC,IAAD,QAGJ,uBAAGA,UAAU,eAAe,OAE9B,yBAAKA,UAAU,cACb,yBAAKA,UAAU,oBACb,yBAAKC,QAAS,kBAAIlE,GAAO,eAAeiE,UAAiB,cAANlE,EAAA,iDAAnD,cAGA,yBAAKmE,QAAS,kBAAIlE,GAAO,gBAAgBiE,UAAiB,eAANlE,EAAA,iDAApD,gBAIF,yBAAKkE,UAAU,oBAOrB,yBAAKC,QAAS,kBAAI3B,MAAqBX,MAAO,CAAC6C,QAAS7E,EAAkB,QAAU,QAASqE,UAAU,cACrG,yBAAKC,QAAS,SAACzB,GAAD,OAAKD,GAAiBC,IAAIwB,UAAU,iBAChD,yBAAKA,UAAU,gBACb,yBAAKA,UAAU,mBACb,yBAAKC,QAAS,kBAAI3B,MAAqB0B,UAAU,wBAC/C,kBAAC,IAAD,QAGJ,uBAAGA,UAAU,eAAb,uBAEA,yBAAKA,UAAU,sBACb,yBAAKC,QA1YI,WAC3BlD,GAASmG,YAAwB,CAC/BC,OAAQjH,GACRgG,YAAanH,KAEdgI,MAAK,WACJhG,GAASK,YAAa3C,EAAM0B,MAAMC,OAAOC,cAE3CiC,MAkYsD0B,UAAU,kBAA9C,YAMJ,yBAAKA,UAAU,cACb,0BAAMA,UAAU,aACd,yBAAKA,UAAU,mBACb,yBAAKA,UAAU,sBACb,+CACA,2BAAOwC,aAAc,GAAIL,SAAU,SAAC3D,GAAD,OAAKxD,EAAQwD,EAAEiE,OAAOC,QAAQ1E,KAAK,OAAO2E,KAAK,OAAO3C,UAAU,iBAGvG,yBAAKA,UAAU,mBACb,yBAAKA,UAAU,sBACb,6CACA,2BAAOwC,aAActG,GAAW+G,UAAQ,EAACjF,KAAK,OAAO2E,KAAK,OAAO3C,UAAU","file":"static/js/5.0a538691.chunk.js","sourcesContent":["import React , { useEffect, useState, useContext, useRef} from 'react'\r\nimport './style.scss'\r\nimport { ICON_ARROWBACK, ICON_MARKDOWN, ICON_DATE, ICON_CLOSE, ICON_UPLOAD, ICON_NEWMSG, ICON_SETTINGS, ICON_DARK } from '../../Icons'\r\nimport { withRouter, Link } from 'react-router-dom'\r\nimport { getProfileImageSrcString } from '../../squeakimages/images';\r\nimport Loader from '../Loader'\r\nimport moment from 'moment'\r\nimport SqueakCard from '../SqueakCard'\r\nimport {API_URL} from '../../config'\r\n\r\nimport { unwrapResult } from '@reduxjs/toolkit'\r\nimport { useSelector } from 'react-redux'\r\nimport { useDispatch } from 'react-redux'\r\n\r\nimport {\r\n  fetchProfile,\r\n  setFollowProfile,\r\n  setUnfollowProfile,\r\n  selectCurrentProfile,\r\n  setDeleteProfile,\r\n  setRenameProfile,\r\n  setCreateContactProfile,\r\n  setProfileImage,\r\n  setClearProfileImage,\r\n  getProfilePrivateKey,\r\n} from '../../features/profiles/profilesSlice'\r\nimport {\r\n  fetchProfileSqueaks,\r\n  selectProfileSqueaks,\r\n  selectLastProfileSqueak,\r\n  selectProfileSqueaksStatus,\r\n  clearProfileSqueaks,\r\n} from '../../features/squeaks/squeaksSlice'\r\n\r\n\r\nconst Profile = (props) => {\r\n  const [activeTab, setActiveTab] = useState('Squeaks')\r\n  const [moreMenu, setMoreMenu] = useState(false)\r\n  const [editName, setName] = useState('')\r\n  const [privateKey, setPrivateKey] = useState('')\r\n  const [editModalOpen, setEditModalOpen] = useState(false)\r\n  const [deleteModalOpen, setDeleteModalOpen] = useState(false)\r\n  const [exportModalOpen, setExportModalOpen] = useState(false)\r\n  const [spendingModalOpen, setSpendingModalOpen] = useState(false)\r\n  const [createModalOpen, setCreateModalOpen] = useState(false)\r\n  const [saved, setSaved] = useState(false)\r\n  const [tab, setTab] = useState('Sats Spent')\r\n  const [styleBody, setStyleBody] = useState(false)\r\n  const userParam = props.match.params.username\r\n\r\n  const profileSqueaks = useSelector(selectProfileSqueaks);\r\n  const lastUserSqueak = useSelector(selectLastProfileSqueak);\r\n  const profileSqueaksStatus = useSelector(selectProfileSqueaksStatus);\r\n  // const privateKey = 'TODO';\r\n\r\n  const user = useSelector(selectCurrentProfile);\r\n  const dispatch = useDispatch();\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n    dispatch(fetchProfile(props.match.params.username));\r\n    reloadSqueaks();\r\n    //preventing edit modal from apprearing after clicking a user on memOpen\r\n    setEditModalOpen(false)\r\n    setName('')\r\n  }, [props.match.params.username])\r\n\r\n  const isInitialMount = useRef(true);\r\n  useEffect(() => {\r\n    if (isInitialMount.current){ isInitialMount.current = false }\r\n    else {\r\n      document.getElementsByTagName(\"body\")[0].style.cssText = styleBody && \"overflow-y: hidden; margin-right: 17px\"\r\n    }\r\n  }, [styleBody])\r\n\r\n  useEffect( () => () => document.getElementsByTagName(\"body\")[0].style.cssText = \"\", [] )\r\n\r\n  const changeTab = (tab) => {\r\n    setActiveTab(tab)\r\n  }\r\n\r\n  const editProfile = () => {\r\n    let values = {\r\n      profileId: user.getProfileId(),\r\n      name: editName,\r\n    }\r\n    dispatch(setRenameProfile({\r\n      profileId: user.getProfileId(),\r\n      profileName: editName,\r\n    }));\r\n    // TODO: chain action to update profile squeaks with the new name.\r\n    setSaved(true)\r\n    toggleEditModal()\r\n  }\r\n\r\n  const deleteProfile = () => {\r\n    let values = {\r\n      profileId: user.getProfileId(),\r\n    }\r\n    console.log('Delete user here');\r\n    dispatch(setDeleteProfile(values));\r\n    toggleDeleteModal();\r\n  }\r\n\r\n\r\n  const exportPrivateKey = () => {\r\n    let values = {\r\n      profileId: user.getProfileId(),\r\n    }\r\n    dispatch(getProfilePrivateKey(values))\r\n    .then(unwrapResult)\r\n    .then((privateKey) =>{\r\n      console.log(privateKey);\r\n      setPrivateKey(privateKey);\r\n    });\r\n  }\r\n\r\n  const createContactProfile = () => {\r\n    dispatch(setCreateContactProfile({\r\n      pubkey: userParam,\r\n      profileName: editName,\r\n    }))\r\n    .then(() => {\r\n      dispatch(fetchProfile(props.match.params.username));\r\n    });\r\n    toggleCreateModal();\r\n  }\r\n\r\n  const toggleEditModal = (param, type) => {\r\n    setStyleBody(!styleBody)\r\n    setSaved(false)\r\n    setName(user.getProfileName())\r\n    setTimeout(()=>{ setEditModalOpen(!editModalOpen) },20)\r\n  }\r\n\r\n  const toggleDeleteModal = () => {\r\n    setStyleBody(!styleBody)\r\n    setSaved(false)\r\n    setTimeout(()=>{ setDeleteModalOpen(!deleteModalOpen) },20)\r\n  }\r\n\r\n  const toggleExportModal = () => {\r\n    setStyleBody(!styleBody)\r\n    setSaved(false)\r\n    setTimeout(()=>{ setExportModalOpen(!exportModalOpen) },20)\r\n  }\r\n\r\n  const toggleSpendingModal = (param, type) => {\r\n    setStyleBody(!styleBody)\r\n    if(type){setTab(type)}\r\n    if(type){setTab(type)}\r\n    setTimeout(()=>{ setSpendingModalOpen(!spendingModalOpen) },20)\r\n  }\r\n\r\n  const toggleCreateModal = (param, type) => {\r\n    setStyleBody(!styleBody)\r\n    setSaved(false)\r\n    setTimeout(()=>{ setCreateModalOpen(!createModalOpen) },20)\r\n  }\r\n\r\n  const handleModalClick = (e) => {\r\n    e.stopPropagation()\r\n  }\r\n\r\n  const followUser = (e,id) => {\r\n    e.stopPropagation()\r\n    dispatch(setFollowProfile(id));\r\n  }\r\n\r\n  const unfollowUser = (e,id) => {\r\n    console.log(e);\r\n    e.stopPropagation()\r\n    dispatch(setUnfollowProfile(id));\r\n  }\r\n\r\n  const changeAvatar = () => {\r\n    let file = document.getElementById('avatar').files[0];\r\n    uploadAvatar(file);\r\n  }\r\n\r\n  const clearAvatar = () => {\r\n    dispatch(setClearProfileImage({\r\n      profileId: user.getProfileId(),\r\n    }));\r\n    setSaved(true)\r\n    toggleEditModal()\r\n  }\r\n\r\n  const uploadAvatar = (file) => {\r\n    if (file == null)\r\n    return;\r\n    const reader = new FileReader();\r\n    reader.addEventListener('load', () => {\r\n      // convert image file to base64 string\r\n      // preview.src = reader.result;\r\n      const imageBase64Stripped = reader.result.split(',')[1];\r\n      uploadAvatarAsBase64(imageBase64Stripped);\r\n    }, false);\r\n    if (file) {\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const uploadAvatarAsBase64 = (imageBase64) => {\r\n    dispatch(setProfileImage({\r\n      profileId: user.getProfileId(),\r\n      imageBase64: imageBase64,\r\n    }));\r\n    setSaved(true)\r\n    toggleEditModal()\r\n  };\r\n\r\n  const getLastSqueak = (squeakLst) => {\r\n    if (squeakLst == null) {\r\n      return null;\r\n    } if (squeakLst.length === 0) {\r\n      return null;\r\n    }\r\n    return squeakLst.slice(-1)[0];\r\n  };\r\n\r\n  const getMoreSqueaks = () => {\r\n    let lastSqueak = getLastSqueak(profileSqueaks);\r\n    dispatch(fetchProfileSqueaks({\r\n      profilePubkey: props.match.params.username,\r\n      limit: 10,\r\n      lastSqueak: lastUserSqueak,\r\n    }));\r\n  }\r\n\r\n  const reloadSqueaks = () => {\r\n    dispatch(clearProfileSqueaks());\r\n    dispatch(fetchProfileSqueaks({\r\n      profilePubkey: props.match.params.username,\r\n      limit: 10,\r\n      lastSqueak: null,\r\n    }));\r\n  }\r\n\r\n  const openMore = () => { setMoreMenu(!moreMenu) }\r\n\r\n  const handleMenuClick = (e) => { e.stopPropagation() }\r\n\r\n  console.log(user && user.getProfileName());\r\n\r\n  return(\r\n    <div>\r\n      <div>\r\n        <div className=\"profile-wrapper\">\r\n          <div className=\"profile-header-wrapper\">\r\n            <div className=\"profile-header-back\">\r\n              <div onClick={()=>window.history.back()} className=\"header-back-wrapper\">\r\n                <ICON_ARROWBACK/>\r\n              </div>\r\n            </div>\r\n            <div className=\"profile-header-content\">\r\n              <div className=\"profile-header-name\">\r\n                {userParam}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"profile-banner-wrapper\">\r\n            <img alt=\"\"/>\r\n          </div>\r\n          <div className=\"profile-details-wrapper\">\r\n            <div className=\"profile-options\">\r\n              <div className=\"profile-image-wrapper\">\r\n                <img src={user ? `${getProfileImageSrcString(user)}` : null} alt=\"\"/>\r\n              </div>\r\n\r\n              {user &&\r\n                <div id=\"profileMoreMenu\" onClick={openMore} className=\"Nav-link\">\r\n                  <div className={\"Nav-item-hover\"}>\r\n                    <ICON_SETTINGS  />\r\n                  </div>\r\n                  <div onClick={()=>openMore()} style={{display: moreMenu ? 'block' : 'none'}} className=\"more-menu-background\">\r\n                    <div className=\"more-modal-wrapper\">\r\n                      {moreMenu ?\r\n                        <div style={{\r\n                            top: document.getElementById('profileMoreMenu') && `${document.getElementById('profileMoreMenu').getBoundingClientRect().top - 40}px`,\r\n                            left: document.getElementById('profileMoreMenu') && `${document.getElementById('profileMoreMenu').getBoundingClientRect().left}px`,\r\n                            height: '210px',\r\n                          }} onClick={(e)=>handleMenuClick(e)} className=\"more-menu-content\">\r\n                          <div onClick={toggleDeleteModal} className=\"more-menu-item\">\r\n                            <span>Delete Profile</span>\r\n                          </div>\r\n                          <div onClick={toggleEditModal} className=\"more-menu-item\">\r\n                            <span>Edit Profile</span>\r\n                          </div>\r\n                          {user.getHasPrivateKey() &&\r\n                            <div onClick={toggleExportModal} className=\"more-menu-item\">\r\n                              <span>Export Private Key</span>\r\n                            </div>\r\n                          }\r\n                        </div> : null }\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                }\r\n\r\n                {user &&\r\n                  <div onClick={(e)=>\r\n                      user.getFollowing() ?\r\n                      unfollowUser(e,user.getProfileId()) :\r\n                      followUser(e,user.getProfileId())\r\n                    }\r\n                    className={user.getFollowing() ? 'unfollow-switch profile-edit-button' : 'profile-edit-button'}>\r\n                    <span><span>{ user.getFollowing() ? 'Following' : 'Follow'}</span></span>\r\n                  </div>\r\n                }\r\n\r\n                {!user &&\r\n                  <div onClick={(e)=>toggleCreateModal('create')}\r\n                    className='profiles-create-button'>\r\n                    <span>Add Contact Profile</span>\r\n                  </div>\r\n                }\r\n              </div>\r\n              <div className=\"profile-details-box\">\r\n                <div className=\"profile-name\">{user ? user.getProfileName() : ''}</div>\r\n                <div className=\"profile-username\">@{userParam}</div>\r\n                <div className=\"profile-info-box\">\r\n                  &nbsp;\r\n                </div>\r\n              </div>\r\n              <div className=\"profile-social-box\">\r\n                {/* TODO: Implement sats spent */}\r\n                <div onClick={()=>toggleSpendingModal('members','Sats Spent')}>\r\n                  <p className=\"follow-num\"> 0 </p>\r\n                  <p className=\"follow-text\"> sats spent </p>\r\n                </div>\r\n                {/* TODO: Implement sats eaned */}\r\n                <div onClick={()=>toggleSpendingModal('members', 'Sats Earned')}>\r\n                  <p className=\"follow-num\"> 0 </p>\r\n                  <p className=\"follow-text\"> sats earned </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"profile-nav-menu\">\r\n              <div key={'squeaks'} onClick={()=>changeTab('Squeaks')} className={activeTab ==='Squeaks' ? `profile-nav-item activeTab` : `profile-nav-item`}>\r\n                Squeaks\r\n              </div>\r\n              <div key={'replies'} onClick={()=>changeTab('Squeaks&Replies')} className={activeTab ==='Squeaks&Replies' ? `profile-nav-item activeTab` : `profile-nav-item`}>\r\n                Squeaks & replies\r\n              </div>\r\n              <div key={'media'} onClick={()=>changeTab('Media')} className={activeTab ==='Media' ? `profile-nav-item activeTab` : `profile-nav-item`}>\r\n                Media\r\n              </div>\r\n              <div key={'likes'} onClick={()=>changeTab('Likes')} className={activeTab ==='Likes' ? `profile-nav-item activeTab` : `profile-nav-item`}>\r\n                Likes\r\n              </div>\r\n            </div>\r\n            {activeTab === 'Squeaks' ?\r\n              profileSqueaks.map(t=>{\r\n                if(!t.getReplyTo())\r\n                return <SqueakCard squeak={t} key={t.getSqueakHash()} id={t.getSqueakHash()} user={t.getAuthor()} />\r\n              }) : activeTab === 'Squeaks&Replies' ?\r\n              profileSqueaks.map(t=>{\r\n                return <SqueakCard squeak={t} key={t.getSqueakHash()} id={t.getSqueakHash()} user={t.getAuthor()} />\r\n              }) :\r\n              activeTab === 'Likes' ?\r\n              null: activeTab === 'Media' ?\r\n              null: null}\r\n              {/* TODO: fix get loading state by doing this: https://medium.com/stashaway-engineering/react-redux-tips-better-way-to-handle-loading-flags-in-your-reducers-afda42a804c6 */}\r\n              {profileSqueaks.length > 0 &&\r\n                <>\r\n                {profileSqueaksStatus == 'loading' ?\r\n                  <Loader /> :\r\n                    <div onClick={() => getMoreSqueaks()} className='squeak-btn-side squeak-btn-active'>\r\n                      Load more\r\n                    </div>}\r\n                    </>\r\n                }\r\n\r\n              </div>\r\n\r\n              {/* Modal for edit profile */}\r\n              <div onClick={()=>toggleEditModal()} style={{display: editModalOpen ? 'block' : 'none'}} className=\"modal-edit\">\r\n                <div onClick={(e)=>handleModalClick(e)} className=\"modal-content\">\r\n                  <div className=\"modal-header\">\r\n                    <div className=\"modal-closeIcon\">\r\n                      <div onClick={()=>toggleEditModal()} className=\"modal-closeIcon-wrap\">\r\n                        <ICON_CLOSE />\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"modal-title\">'Edit Profile'</p>\r\n                    <div className=\"save-modal-wrapper\">\r\n                      <div onClick={clearAvatar} className=\"save-modal-btn\">\r\n                        Clear Image\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"save-modal-wrapper\">\r\n                      <div onClick={editProfile} className=\"save-modal-btn\">\r\n                        Save\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"modal-body\">\r\n                    <div className=\"modal-banner\">\r\n                    </div>\r\n                    <div className=\"modal-profile-pic\">\r\n                      <div className=\"modal-back-pic\">\r\n                        <img src={user ? `${getProfileImageSrcString(user)}` : null} alt=\"profile\" />\r\n                        <div>\r\n                          <ICON_UPLOAD/>\r\n                          <input onChange={()=>changeAvatar()} title=\" \" id=\"avatar\" style={{opacity:'0'}} type=\"file\"/>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                      <form className=\"edit-form\">\r\n                        <div className=\"edit-input-wrap\">\r\n                          <div className=\"edit-input-content\">\r\n                            <label>Name</label>\r\n                            <input defaultValue={''} onChange={(e)=>setName(e.target.value)} type=\"text\" name=\"name\" className=\"edit-input\"/>\r\n                          </div>\r\n                        </div>\r\n                      </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n\r\n              {/* Modal for delete profile */}\r\n              <div onClick={()=>toggleDeleteModal()} style={{display: deleteModalOpen ? 'block' : 'none'}} className=\"modal-edit\">\r\n                <div onClick={(e)=>handleModalClick(e)} className=\"modal-content\">\r\n                  <div className=\"modal-header\">\r\n                    <div className=\"modal-closeIcon\">\r\n                      <div onClick={()=>toggleDeleteModal()} className=\"modal-closeIcon-wrap\">\r\n                        <ICON_CLOSE />\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"modal-title\">'Delete Profile'</p>\r\n                    <div className=\"save-modal-wrapper\">\r\n                      <div onClick={deleteProfile} className=\"save-modal-btn\">\r\n                        Delete\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Modal for export profile */}\r\n              <div onClick={()=>toggleExportModal()} style={{display: exportModalOpen ? 'block' : 'none'}} className=\"modal-edit\">\r\n                <div onClick={(e)=>handleModalClick(e)} className=\"modal-content\">\r\n                  <div className=\"modal-header\">\r\n                    <div className=\"modal-closeIcon\">\r\n                      <div onClick={()=>toggleExportModal()} className=\"modal-closeIcon-wrap\">\r\n                        <ICON_CLOSE />\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"modal-title\">'Export Private Key'</p>\r\n                    <div className=\"save-modal-wrapper\">\r\n                      <div onClick={exportPrivateKey} className=\"save-modal-btn\">\r\n                        Export\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"modal-body\">\r\n                    <form className=\"edit-form\">\r\n                      <div className=\"edit-input-wrap\">\r\n                        <div className=\"edit-input-content\">\r\n                          <label>Private Key</label>\r\n                          <input defaultValue={privateKey} readOnly type=\"text\" name=\"name\" className=\"edit-input\"/>\r\n                        </div>\r\n                      </div>\r\n                    </form>\r\n                  </div>\r\n\r\n                </div>\r\n              </div>\r\n\r\n\r\n              {/* Modal for sats spent and earned */}\r\n              <div onClick={()=>toggleSpendingModal()} style={{display: spendingModalOpen ? 'block' : 'none'}} className=\"modal-edit\">\r\n                <div onClick={(e)=>handleModalClick(e)} className=\"modal-content\">\r\n                  <div className=\"modal-header no-b-border\">\r\n                    <div className=\"modal-closeIcon\">\r\n                      <div onClick={()=>toggleEditModal()} className=\"modal-closeIcon-wrap\">\r\n                        <ICON_CLOSE />\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"modal-title\">{null}</p>\r\n                  </div>\r\n                  <div className=\"modal-body\">\r\n                    <div className=\"explore-nav-menu\">\r\n                      <div onClick={()=>setTab('Sats Spent')} className={tab =='Sats Spent' ? `explore-nav-item activeTab` : `explore-nav-item`}>\r\n                        Sats Spent\r\n                      </div>\r\n                      <div onClick={()=>setTab('Sats Earned')} className={tab =='Sats Earned' ? `explore-nav-item activeTab` : `explore-nav-item`}>\r\n                        Sats Earned\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"modal-scroll\">\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Modal for create signing profile */}\r\n              <div onClick={()=>toggleCreateModal()} style={{display: createModalOpen ? 'block' : 'none'}} className=\"modal-edit\">\r\n                <div onClick={(e)=>handleModalClick(e)} className=\"modal-content\">\r\n                  <div className=\"modal-header\">\r\n                    <div className=\"modal-closeIcon\">\r\n                      <div onClick={()=>toggleCreateModal()} className=\"modal-closeIcon-wrap\">\r\n                        <ICON_CLOSE />\r\n                      </div>\r\n                    </div>\r\n                    <p className=\"modal-title\">Add Contact Profile</p>\r\n\r\n                    <div className=\"save-modal-wrapper\">\r\n                      <div onClick={createContactProfile} className=\"save-modal-btn\">\r\n                        Submit\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"modal-body\">\r\n                    <form className=\"edit-form\">\r\n                      <div className=\"edit-input-wrap\">\r\n                        <div className=\"edit-input-content\">\r\n                          <label>Profile Name</label>\r\n                          <input defaultValue={''} onChange={(e)=>setName(e.target.value)} type=\"text\" name=\"name\" className=\"edit-input\"/>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"edit-input-wrap\">\r\n                        <div className=\"edit-input-content\">\r\n                          <label>Public Key</label>\r\n                          <input defaultValue={userParam} readOnly type=\"text\" name=\"name\" className=\"edit-input\"/>\r\n                        </div>\r\n                      </div>\r\n                    </form>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n\r\n            </div>\r\n          </div>\r\n        )\r\n      }\r\n\r\n      export default withRouter(Profile)\r\n"],"sourceRoot":""}