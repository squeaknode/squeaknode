{"version":3,"sources":["components/Home/index.js"],"names":["Home","useContext","StoreContext","state","actions","session","useEffect","window","scrollTo","reloadTweets","clearTweets","getTweets","lastTweet","className","tweets","map","t","tweet","key","getSqueakHash","id","user","getAuthor","loading","onClick","squeakLst","length","slice","getMoreTweets"],"mappings":"kJAAA,0FA+DeA,UAlDF,WAAO,IAAD,EACYC,qBAAWC,KAA9BC,EADO,EACPA,MAAOC,EADA,EACAA,QACPC,EAAYF,EAAZE,QACRC,qBAAU,WACNC,OAAOC,SAAS,EAAG,GAEnBC,MACD,IAEH,IAcMA,EAAe,WACjBL,EAAQM,cACRN,EAAQO,UAAU,CAACC,UAAW,QAGlC,OACI,yBAAKC,UAAU,gBACX,yBAAKA,UAAU,uBACX,wBAAIA,UAAU,eAAd,kBAIHR,EAAU,kBAAC,IAAD,MAAiB,KAC5B,yBAAKQ,UAAU,wBACdV,EAAMW,OAAOC,KAAI,SAAAC,GACd,OAAO,kBAAC,IAAD,CAAWC,MAAOD,EAAGE,IAAKF,EAAEG,gBAAiBC,GAAIJ,EAAEG,gBAAiBE,KAAML,EAAEM,iBAItFnB,EAAMoB,QAAU,kBAAC,IAAD,MAAa,yBAAKC,QAAS,kBAxB9B,WAClB,IAVmBC,EAUfb,EATW,OADIa,EAUWtB,EAAMW,SAPX,IAArBW,EAAUC,OADP,KAIFD,EAAUE,OAAO,GAAG,GAKzBvB,EAAQO,UAAU,CAACC,UAAWA,IAsBwBgB,IAAiBf,UAAU,mCAA/C","file":"static/js/3.d902aa8c.chunk.js","sourcesContent":["import React, { useEffect, useState, useContext, useRef } from 'react'\r\nimport { StoreContext } from '../../store/store'\r\nimport './style.scss'\r\nimport axios from 'axios'\r\nimport ContentEditable from 'react-contenteditable'\r\nimport { ICON_IMGUPLOAD } from '../../Icons'\r\nimport { Link } from 'react-router-dom'\r\nimport { API_URL } from '../../config'\r\nimport Loader from '../Loader'\r\nimport TweetCard from '../TweetCard'\r\nimport MakeSqueak from '../MakeSqueak'\r\n\r\n\r\nconst Home = () => {\r\n    const { state, actions } = useContext(StoreContext)\r\n    const { session } = state\r\n    useEffect(() => {\r\n        window.scrollTo(0, 0)\r\n        // actions.getTweets({lastTweet: null})\r\n        reloadTweets();\r\n    }, [])\r\n\r\n    const getLastSqueak = (squeakLst) => {\r\n      if (squeakLst == null) {\r\n        return null;\r\n      } if (squeakLst.length === 0) {\r\n        return null;\r\n      }\r\n      return squeakLst.slice(-1)[0];\r\n    };\r\n\r\n    const getMoreTweets = () => {\r\n        let lastTweet = getLastSqueak(state.tweets);\r\n        actions.getTweets({lastTweet: lastTweet});\r\n    }\r\n\r\n    const reloadTweets = () => {\r\n        actions.clearTweets();\r\n        actions.getTweets({lastTweet: null});\r\n    }\r\n\r\n    return (\r\n        <div className=\"Home-wrapper\">\r\n            <div className=\"Home-header-wrapper\">\r\n                <h2 className=\"Home-header\">\r\n                    Latest Tweets\r\n                </h2>\r\n            </div>\r\n            {session ? <MakeSqueak /> : null }\r\n            <div className=\"Tweet-input-divider\"></div>\r\n            {state.tweets.map(t => {\r\n                return <TweetCard tweet={t} key={t.getSqueakHash()} id={t.getSqueakHash()} user={t.getAuthor()} />\r\n            })}\r\n\r\n            {/* TODO: fix get loading state by doing this: https://medium.com/stashaway-engineering/react-redux-tips-better-way-to-handle-loading-flags-in-your-reducers-afda42a804c6 */}\r\n            {state.loading ? <Loader /> : <div onClick={() => getMoreTweets()} className='tweet-btn-side tweet-btn-active'>\r\n                Load more\r\n            </div>}\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home\r\n"],"sourceRoot":""}