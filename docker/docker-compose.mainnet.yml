version: '3'
services:

  bitcoin-core:
    command:
      -printtoconsole
      -testnet=0
      -server=1
      -rpcbind=0.0.0.0
      -rpcallowip=0.0.0.0/0
      -rpcuser=devuser
      -rpcpassword=devpass
      -zmqpubrawblock=tcp://0.0.0.0:28332
      -zmqpubrawtx=tcp://0.0.0.0:28333

  lnd:
    environment:
      - NETWORK=mainnet
      - RPCHOST=bitcoin-core
      - BACKEND=bitcoind

  squeaknode:
    environment:
      - WEBADMIN_USE_SSL
      - WEBADMIN_LOGIN_DISABLED
      - WEBADMIN_ALLOW_CORS
      - NETWORK=mainnet
      - LOG_LEVEL
      - SQUEAKNODE_SYNC_INTERVAL_S

volumes:
  # shared volume is needed for sharing the btcd certificate
  shared:
    driver: local
